(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push(["a1ec","chunk-vendors"]),r()})({"015e":function(e,t,r){},"0e3a":function(e,t,r){"use strict";var n=r("d26f"),a=r.n(n);a.a},"23cbe":function(e,t,r){"use strict";var n=r("51bb"),a=r.n(n);a.a},"28e0":function(e,t,r){"use strict";var n=r("eeab"),a=r.n(n);a.a},"2cf7":function(e,t,r){"use strict";var n=r("015e"),a=r.n(n);a.a},"2d1c":function(e,t,r){},3176:function(e,t,r){"use strict";var n=r("b9b5"),a=r.n(n);a.a},"47a8":function(e,t,r){},"480f":function(e,t,r){"use strict";var n=r("c0ee"),a=r.n(n);a.a},"4f1f":function(e,t,r){},"51bb":function(e,t,r){},"637b":function(e,t,r){"use strict";var n=r("ff01"),a=r.n(n);a.a},"63fc":function(e,t,r){"use strict";var n=r("9cb8"),a=r.n(n);a.a},"8d4c":function(e,t,r){"use strict";var n=r("4f1f"),a=r.n(n);a.a},"9cb8":function(e,t,r){},a1ec:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("a026"),a=(r("99af"),r("4160"),r("c975"),r("159b"),r("96cf"),r("1da1")),i=r("3835"),s=r("d4ec"),o=r("bee2"),l=r("257e"),c=r("262e"),u=r("2caf"),d=function(e){Object(c["a"])(r,e);var t=Object(u["a"])(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.EventSource,o=void 0===i?window.EventSource:i,c=a.listenToRestClient,u=void 0===c||c,d=a.pollingInterval,p=void 0===d?[500,5e3,1e3]:d,f=a.since,h=void 0===f?new Date:f,m=a.useEventSource,v=void 0!==m&&m,g=a.withCredentials,b=void 0===g||g;return Object(s["a"])(this,r),n=t.call(this),Object.assign(Object(l["a"])(n),{$rest:e,EventSource:o,pollingInterval:p,since:h,useEventSource:v,withCredentials:b}),u&&(e.$on("login",(function(){n.connect()})),e.$on("logout",(function(){n.disconnect()}))),n}return Object(o["a"])(r,[{key:"_emitNotification",value:function(e){var t=e.type,r=e.updated;r&&(this.since=new Date(Math.max(+this.since,+new Date(r))));for(var n=t.indexOf(".");-1!==n;n=t.indexOf(".",n+1))this.$emit("message:".concat(t.substring(0,n)),e,this);this.$emit("message:".concat(t),e,this),this.$emit("message",e,this)}},{key:"_onSseMessage",value:function(e){var t=e.data;this._emitNotification(JSON.parse(t))}},{key:"_onSseError",value:function(e){this.$emit("error",e,this),this.disconnect(),this.useEventSource=!1,this.connect()}},{key:"connect",value:function(){if(!this.connected)if(this.useEventSource&&this.EventSource){var e=Math.ceil(+this.since/1e3),t="".concat(this.$rest.apiRoot,"/notification/stream?since=").concat(e);this._eventSource=new this.EventSource(t,{withCredentials:this.withCredentials}),this._eventSource.onmessage=this._onSseMessage.bind(this),this._eventSource.onerror=this._onSseError.bind(this),this.$emit("start",this)}else this._poll()}},{key:"disconnect",value:function(){this._stopPolling(),this._eventSource&&(this._eventSource.close(),this._eventSource=null,this.$emit("stop",this))}},{key:"_poll",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Object(i["a"])(this.pollingInterval,3),s=n[0],o=n[1],l=n[2];this._poller=setTimeout(Object(a["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$rest.get("/notification?since=".concat(t.since.toISOString()));case 3:a=n.sent,i=a.data,i.forEach(t._emitNotification.bind(t)),e=i.length?s:0===r?o:Math.min(r+l,o),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),e=o;case 12:return n.prev=12,t._poll(e),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])}))),r)}},{key:"_stopPolling",value:function(){clearTimeout(this._poller),this._poller=null}},{key:"connected",get:function(){return!(!this._eventSource&&!this._poller)}}]),r}(n["a"]),p=(r("ac1f"),r("5319"),r("1276"),r("ade3")),f=r("5530"),h=r("bc3a"),m=r.n(h),v=r("a78e"),g=r.n(v),b=r("4328"),y=64,w="#girderToken=",_="__",x="Girder-Token",k="Girder-OTP",C="Girder-Authorization";function R(e){g.a.set("girderToken",e.token,{expires:new Date(e.expires)})}function j(e){var t=e.hash.split(w),r=t[t.length-1].split(_)[0];if(r.length===y){var n=new Date;n.setDate((new Date).getDate()+365),R({token:r,expires:n}),e.hash=e.hash.replace("".concat(w).concat(r).concat(_),"")}return r}var O=function(e){Object(c["a"])(r,e);var t=Object(u["a"])(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.apiRoot,i=void 0===a?"/api/v1":a,o=n.token,c=void 0===o?g.a.get("girderToken")||j(window.location):o,u=n.axios,d=void 0===u?m.a.create():u,h=n.authenticateWithCredentials,v=void 0!==h&&h,b=n.useGirderAuthorizationHeader,y=void 0!==b&&b,w=n.setLocalCookie,_=void 0===w||w;return Object(s["a"])(this,r),e=t.call(this,{data:{user:null,token:c}}),Object.assign(Object(l["a"])(e),d,{apiRoot:i,setLocalCookie:_,authenticateWithCredentials:v,useGirderAuthorizationHeader:y}),e.interceptors.request.use((function(t){return Object(f["a"])(Object(f["a"])({},t),{},{baseURL:e.apiRoot,headers:Object(f["a"])(Object(p["a"])({},x,e.token),t.headers)})})),e}return Object(o["a"])(r,[{key:"login",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=1,e.next=4,this.logout();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:return i=Object(p["a"])({},x,null),this.useGirderAuthorizationHeader?i[C]="Basic ".concat(window.btoa("".concat(t,":").concat(r))):a={username:t,password:r},n&&(i[k]=n),e.next=13,this.get("user/authentication",{headers:i,auth:a,withCredentials:this.authenticateWithCredentials});case 13:return s=e.sent,this.token=s.data.authToken.token,this.user=s.data.user,this.setLocalCookie&&R(s.data.authToken),this.$emit("login",this.user),e.abrupt("return",s);case 19:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"logout",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.delete("user/authentication");case 5:e.next=11;break;case 7:if(e.prev=7,e.t0=e["catch"](2),401===e.t0.response.status){e.next=11;break}throw e.t0;case 11:return e.prev=11,this.token=null,this.user=null,g.a.remove("girderToken"),this.$emit("logout"),e.finish(11);case 17:case"end":return e.stop()}}),e,this,[[2,7,11,17]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchUser",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/me");case 2:return t=e.sent,this.user=t.data,null===this.user&&(this.token=null),e.abrupt("return",this.user);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"register",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,n,a,i){var s,o,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=l.length>5&&void 0!==l[5]&&l[5],e.next=3,this.post("user",Object(b["stringify"])({login:t,email:r,firstName:n,lastName:a,password:i,admin:s}));case 3:if(o=e.sent,o.data.authToken){e.next=6;break}return e.abrupt("return",o);case 6:return this.token=o.data.authToken.token,this.user=o.data,this.setLocalCookie&&R(o.data.authToken),this.$emit("register",this.user),this.$emit("login",this.user),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));function t(t,r,n,a,i){return e.apply(this,arguments)}return t}()}]),r}(n["a"]),T=r("3003"),S=r("f309"),V=(r("41e6"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"px-3 py-2 access-control"},[r("v-card-title",[r("div",[r("div",{staticClass:"title"},[e._v(" Access control ")]),r("breadcrumb",{attrs:{location:e.model,readonly:"readonly","no-root":"no-root"}})],1)]),r("v-card-text",{staticClass:"pt-0"},[r("v-switch",{staticClass:"mb-4",attrs:{hint:e.publicText,label:"Public","persistent-hint":"persistent-hint"},model:{value:e.public_,callback:function(t){e.public_=t},expression:"public_"}}),r("v-subheader",[e._v("Users / Groups")]),r("transition",{attrs:{name:"height",mode:"out-in"}},[e.groupsAndUsers.length?r("v-list",{staticClass:"group-user",attrs:{"two-line":"two-line"}},[r("transition-group",{attrs:{name:"height2"}},e._l(e.groupsAndUsers,(function(t){return r("v-list-item",{key:t.id},[r("v-list-item-action",{staticClass:"mr-5"},[r("v-icon",[e._v(e._s(e.$vuetify.icons.values[t.login?"user":"group"]))])],1),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(t.name))]),r("v-list-item-subtitle",[e._v(" "+e._s(t.login||t.description)+" ")])],1),r("v-list-item-action",{staticClass:"mr-5"},[r("v-select",{staticClass:"level",attrs:{items:e.permissions,light:"light",solo:"solo","hide-details":"hide-details",dense:"dense"},model:{value:t.level,callback:function(r){e.$set(t,"level",r)},expression:"resource.level"}})],1),r("v-list-item-action",{staticClass:"mr-5"},[r("v-btn",{attrs:{icon:"icon"},on:{click:function(r){return e.remove(t)}}},[r("v-icon",[e._v("mdi-minus-circle")])],1)],1)],1)})),1)],1):e._e(),e.groupsAndUsers.length||e.loading?e._e():r("div",{staticClass:"mt-1 mb-2"},[e._v(" Empty ")])],1),r("v-subheader",[e._v("Grant access")]),r("search",{staticClass:"search mb-3",attrs:{"search-type-options":[{name:"User",value:"user"},{name:"Group",value:"group"}],"search-types":["user","group"],"hide-search-icon":"hide-search-icon",placeholder:"User or group name"},on:{select:e.groupOrUserSelected}}),r("v-switch",{staticClass:"mt-0",attrs:{hint:e.recursiveText,label:"Include subfolders","persistent-hint":"persistent-hint"},model:{value:e.recursive,callback:function(t){e.recursive=t},expression:"recursive"}})],1),e._t("card-actions",[r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{text:"text"},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{color:"primary",depressed:"depressed"},on:{click:e.save}},[e._v(" Save ")])],1)],null,{save:e.save,loading:e.loading})],2)}),$=[],P=(r("a4d3"),r("e01a"),r("7db0"),r("d81d"),r("a434"),r("b0c0"),r("5377"),r("2909")),D=(r("13d5"),r("fb6a"),r("b680"),r("d3b7"),r("3ca3"),r("ddb0"),r("c1df")),L=r.n(D),F=(r("07ac"),{INACTIVE:{value:0,text:"Inactive",icon:"mdi-pause",color:"grey lighten-1"},QUEUED:{value:1,text:"Queued",icon:"mdi-dots-horizontal",color:"yellow darken-2",indeterminate:!0},RUNNING:{value:2,text:"Running",icon:"mdi-autorenew",color:"light-blue",class:["mdi-spin"]},SUCCESS:{value:3,text:"Success",icon:"mdi-check-circle",color:"green"},ERROR:{value:4,text:"Error",icon:"mdi-alert-circle",color:"red"},CANCELED:{value:5,text:"Canceled",icon:"mdi-close-circle",color:"grey darken-1"},WORKER_FETCHING_INPUT:{value:820,text:"Fetching input",icon:"mdi-cloud-download",color:"light-blue lighten-2",indeterminate:!0},WORKER_CONVERTING_INPUT:{value:821,text:"Converting input",icon:"mdi-shuffle",color:"lime",indeterminate:!0},WORKER_CONVERTING_OUTPUT:{value:822,text:"Converting output",icon:"mdi-shuffle",color:"lime",indeterminate:!0},WORKER_PUSHING_OUTPUT:{value:823,text:"Pushing output",icon:"mdi-cloud-upload",color:"light-blue lighten-2",indeterminate:!0},WORKER_CANCELING:{value:824,text:"Canceling",icon:"mdi-alert",color:"grey darken-1",indeterminate:!0}});function I(e){return Object.values(F).find((function(t){return t.value===e}))}r("4fad");var E=function(){function e(t){Object(s["a"])(this,e),Object.assign(this,t,{etags:{},offset:0,partNumber:1})}return Object(o["a"])(e,[{key:"_finalizeMultipartXml",value:function(){var e=document.implementation.createDocument(null,null,null),t=e.createElement("CompleteMultipartUpload");return Object.entries(this.etags).forEach((function(r){var n=Object(i["a"])(r,2),a=n[0],s=n[1],o=e.createElement("Part"),l=e.createElement("PartNumber"),c=e.createElement("ETag");l.appendChild(e.createTextNode(a)),c.appendChild(e.createTextNode(s)),o.appendChild(l),o.appendChild(c),t.appendChild(o)})),t.outerHTML}},{key:"complete",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.progress({indeterminate:!0,current:this.file.size,total:this.file.size}),e.abrupt("return",this.$rest.post("file/completion",Object(b["stringify"])({uploadId:this.upload._id})));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_multiChunkUpload",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.upload.s3.request,r=t.headers,n=t.method,a=t.url,e.next=3,m.a.request({data:null,headers:r,method:n,url:a});case 3:return i=e.sent,s=(new DOMParser).parseFromString(i.data,"text/xml"),this.upload.s3.uploadId=s.querySelector("InitiateMultipartUploadResult > UploadId").textContent,e.abrupt("return",this._sendChunks());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_sendChunks",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,i,s,o,l,c,u,d,p=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=function(e){return p.progress({current:p.offset+e.loaded,total:p.file.size,indeterminate:!e.lengthComputable})};case 1:if(!(this.offset<this.file.size)){e.next=16;break}return r=this.file.slice(this.offset,this.offset+this.upload.s3.chunkLength),e.next=5,this.$rest.post("file/chunk",Object(b["stringify"])({chunk:JSON.stringify({contentLength:r.size,partNumber:this.partNumber,s3UploadId:this.upload.s3.uploadId}),offset:0,uploadId:this.upload._id}));case 5:return n=e.sent.data.s3.request,a=n.method,i=n.url,e.next=10,m.a.request({data:r,method:a,url:i,onUploadProgress:t});case 10:s=e.sent,this.etags[this.partNumber]=s.headers.etag,this.partNumber+=1,this.offset+=r.size,e.next=1;break;case 16:return e.next=18,this.complete();case 18:return o=e.sent,l=o.data.s3FinalizeRequest,c=l.headers,u=l.method,d=l.url,e.next=22,m.a.request({data:this._finalizeMultipartXml(),headers:c,method:u,url:d});case 22:return e.abrupt("return",o.data);case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"start",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.upload.s3.chunked){e.next=2;break}return e.abrupt("return",this._multiChunkUpload());case 2:return t=this.upload.s3.request,r=t.headers,n=t.method,a=t.url,e.next=5,m.a.request({data:this.file,headers:r,method:n,url:a,onUploadProgress:function(e){return i.progress({current:e.loaded,total:i.file.size,indeterminate:!e.lengthComputable})}});case 5:return e.next=7,this.complete();case 7:return e.abrupt("return",e.sent.data);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resume",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.upload.s3.chunked){e.next=2;break}return e.abrupt("return",this._sendChunks());case 2:return e.next=4,this.$rest.get("file/offset?uploadId=".concat(this.upload._id));case 4:return this.upload.s3.request=e.sent.data,e.abrupt("return",this.start());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),U=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.$rest,a=r.parent,i=r.progress,o=void 0===i?function(){return null}:i;Object(s["a"])(this,e),Object.assign(this,{$rest:n,file:t,parent:a,progress:o})}return Object(o["a"])(e,[{key:"start",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resume",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.start());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeUpload",value:function(){}},{key:"afterUpload",value:function(){}},{key:"onError",value:function(e){}}]),e}(),M=67108864,A={s3:E},z=function(e){Object(c["a"])(r,e);var t=Object(u["a"])(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.$rest,o=a.parent,c=a.progress,u=void 0===c?function(){return null}:c,d=a.params,p=void 0===d?{}:d,f=a.chunkLen,h=void 0===f?M:f;return Object(s["a"])(this,r),n=t.call(this,e,{$rest:i,parent:o,progress:u}),Object.assign(Object(l["a"])(n),{params:p,chunkLen:h,upload:null,offset:0,behavior:null}),n}return Object(o["a"])(r,[{key:"_sendChunks",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=function(e){return i.progress({indeterminate:!e.lengthComputable,current:i.offset+e.loaded,size:i.file.size})};case 1:if(!(this.offset<this.file.size)){e.next=11;break}return r=Math.min(this.offset+this.chunkLen,this.file.size),n=this.file.slice(this.offset,r),a="file/chunk?offset=".concat(this.offset,"&uploadId=").concat(this.upload._id),e.next=7,this.$rest.post(a,n,{onUploadProgress:t,headers:{"Content-Type":"application/octet-stream"}});case 7:this.upload=e.sent.data,this.offset=r,e.next=1;break;case 11:return e.abrupt("return",this.upload);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"start",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$rest.post("/file",Object(b["stringify"])(Object(f["a"])({parentType:this.parent._modelType,parentId:this.parent._id,name:this.file.name,size:this.file.size,mimeType:this.file.type},this.params)));case 2:if(this.upload=e.sent.data,!this.upload.behavior||!A[this.upload.behavior]){e.next=6;break}return this.behavior=new A[this.upload.behavior](this),e.abrupt("return",this.behavior.start());case 6:return e.abrupt("return",this._sendChunks());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resume",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=2;break}return e.abrupt("return",this.start());case 2:if(this.progress({indeterminate:!0}),!this.behavior){e.next=5;break}return e.abrupt("return",this.behavior.resume());case 5:return e.next=7,this.$rest.get("file/offset?uploadId=".concat(this.upload._id));case 7:return this.offset=e.sent.data.offset,e.abrupt("return",this._sendChunks());case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),r}(U),N={methods:{formatDate:function(e){var t=new Date(e);return t.toLocaleString()}}},B={methods:{formatSize:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.base,a=void 0===n?1024:n,i=r.unit,s=void 0===i?"B":i;if(e<a)return"".concat(e," ").concat(s);var o=e;for(t=0;o>=a&&t<4;t+=1)o/=a;return"".concat(o.toFixed(2),"  ").concat(["","K","M","G","T"][t]).concat(s)}}},q={methods:{progressPercent:function(e){return e.total?Math.round(100*(e.current||0)/e.total):0}}},G={methods:{formatUsername:function(e){return"".concat(e.firstName," ").concat(e.lastName," (").concat(e.login,")")}}},J={methods:{progressAsNumber:function(e){return e?e.current/e.total*100:100},formatJob:function(e){var t=Object(f["a"])({text:"Unknown"},I(e.status));return Object(f["a"])({statusText:t.text,statusColor:t.color,statusTextColor:t.textColor||"white",statusIcon:t.icon,updateString:L()(e.updated).format("dddd, MMMM D, YYYY @ h:mm a"),progressNumber:this.progressAsNumber(e.progress),indeterminate:t.indeterminate,class:t.class},e)}}},H={inject:["girderRest"],data:function(){return{errorMessage:null,files:[],uploading:!1,indeterminate:!1}},watch:{files:function(e){this.$emit("filesChanged",e)}},computed:{totalProgress:function(){return this.files.reduce((function(e,t){return e+t.progress.current}),0)},totalSize:function(){return this.files.reduce((function(e,t){return e+t.file.size}),0)},totalProgressPercent:function(){return this.progressPercent({current:this.totalProgress,total:this.totalSize})}},methods:{reset:function(){this.files=[],this.errorMessage=null,this.uploading=!1,this.indeterminate=!1},inputFilesChanged:function(e){this.files=e.map((function(e){return{file:e,status:"pending",progress:{indeterminate:!1,current:0,size:e.size},upload:null,result:null,uploadClsParams:{}}}))},setFiles:function(e){this.files=e},uploadFile:function(e){var t=this,r=e.file,n=e.hookResult,i=e.dest,s=e.uploadCls,o=Promise.resolve();if("done"===r.status)return o.then((function(){return r.result}));var l=function(e){t.$set(r,"progress",e)};return r.status="uploading",r.progress.indeterminate=!0,r.upload?o=o.then((function(){return r.upload.resume()})):(r.upload=new s(r.file,{$rest:this.girderRest,parent:n&&n.dest?n.dest:i,progress:l,params:r.uploadClsParams}),o=o.then((function(){return r.upload.beforeUpload()})).then((function(){return r.upload.start()}))),o.then(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.upload.afterUpload();case 2:return delete r.upload,r.status="done",r.progress.current=r.file.size,t.file=r.file,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.upload.onError(n);case 2:throw n.response?t.errorMessage=n.response.data.message||"An error occurred during upload.":t.errorMessage="Connection failed.",r.status="error",t.uploading=!1,t.$emit("error",{error:n,file:r}),n;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},start:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,i,s,o,l,c,u,d,p,f,h,m,v;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dest,i=e.preUpload,s=void 0===i?Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))):i,o=e.postUpload,l=void 0===o?Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))):o,c=e.uploadCls,u=void 0===c?z:c,t.uploading=!0,t.indeterminate=!0,t.errorMessage=null,r.next=6,s();case 6:return d=r.sent,t.indeterminate=!1,p=[],f=t.files.slice(),h=5,m=Object(P["a"])(new Array(h)),r.next=14,Promise.all(m.map(Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=f.shift();case 1:if(void 0===r){e.next=10;break}return e.t0=p,e.next=5,t.uploadFile({file:r,hookResult:d,dest:n,uploadCls:u});case 5:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),r=f.shift(),e.next=1;break;case 10:case"end":return e.stop()}}),e)})))));case 14:return r.next=16,Promise.all(p);case 16:return v=r.sent,t.indeterminate=!0,r.next=20,l({results:v});case 20:t.indeterminate=!1,t.uploading=!1,t.files=[],t.$emit("done",v);case 24:case"end":return r.stop()}}),r)})))()}}},K=r("fcf4"),W={theme:{dark:!1,options:{customProperties:!0},themes:{light:{primary:K["a"].lightBlue.darken1,secondary:K["a"].blueGrey.base,accent:K["a"].lightBlue.darken1,error:K["a"].red.base,info:K["a"].lightBlue.lighten1,dropzone:K["a"].grey.lighten3,highlight:K["a"].yellow.lighten4},dark:{primary:K["a"].lightBlue.darken3,secondary:K["a"].grey.base,accent:K["a"].lightBlue.lighten1,dropzone:K["a"].grey.darken2,highlight:K["a"].grey.darken2}}},icons:{iconfont:"mdi",values:{alert:"mdi-alert-circle",bitbucket:"mdi-bitbucket",box_com:"mdi-package",chevron:"mdi-chevron-right",circle:"mdi-checkbox-blank-circle",collection:"mdi-file-tree",download:"mdi-download",edit:"mdi-pencil",externalLink:"mdi-open-in-new",file:"mdi-file",fileMultiple:"mdi-file-multiple",fileNew:"mdi-file-plus",fileUpload:"mdi-file-upload",folder:"mdi-folder",folderNonPublic:"mdi-folder-key",folderNew:"mdi-folder-plus",github:"mdi-github-circle",globe:"mdi-earth",globus:"mdi-earth",google:"mdi-google",group:"mdi-account-multiple",item:"mdi-file",linkedin:"mdi-linkedin",lock:"mdi-lock",login:"mdi-login",logout:"mdi-logout",more:"mdi-dots-horizontal",otp:"mdi-shield-key",preview:"mdi-file-find",search:"mdi-magnify",settings:"mdi-tune",user:"mdi-account",userHome:"mdi-home-account",view:"mdi-eye"}}},Q=function(e){Object(c["a"])(r,e);var t=Object(u["a"])(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return Object(s["a"])(this,r),e=t.call(this,{data:function(){return{flag:!1}}}),e.count=0,e.delay=n,e.timeout=null,e}return Object(o["a"])(r,[{key:"inc",value:function(){this.count+=1,this.count>0&&this._toggleFlag(!0)}},{key:"dec",value:function(){this.count=Math.max(0,this.count-1),0===this.count&&this._toggleFlag(!1)}},{key:"_toggleFlag",value:function(e){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.flag=e}),this.delay)}}]),r}(n["a"]);function Y(e){return e._modelType||e.type}function X(e){var t=Y(e);return["collections","users","root"].indexOf(t)>=0}function Z(e){var t=Y(e);switch(t){case"collections":return"collection";case"users":return"user";default:return""}}function ee(e){return function(t){return!!t&&(X(t)?e:!!t._id)}}var te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"girder-breadcrumb-component"},[e.girderRest.user&&!e.readonly?r("v-icon",{staticClass:"home-button mr-3",attrs:{disabled:e.location._id===e.girderRest.user._id,color:"accent"},on:{click:function(t){return e.$emit("crumbclick",e.girderRest.user)}}},[e._v(" $vuetify.icons.userHome ")]):e._e(),r("v-breadcrumbs",{staticClass:"font-weight-bold pa-0",attrs:{items:e.breadcrumb},scopedSlots:e._u([{key:"item",fn:function(t){var n=t.item;return[r("v-breadcrumbs-item",{attrs:{disabled:e.readonly||e.breadcrumb.indexOf(n)==e.breadcrumb.length-1,tag:"a"},on:{click:function(t){return e.$emit("crumbclick",n)}}},[-1!==["folder","user","collection"].indexOf(n.type)?[r("span",{staticClass:"accent--text"},[e._v(e._s(n.name))])]:"users"===n.type?[r("v-icon",{staticClass:"mdi-18px accent--text"},[e._v(" $vuetify.icons.user ")])]:"collections"===n.type?[r("v-icon",{staticClass:"mdi-18px accent--text"},[e._v(" $vuetify.icons.collection ")])]:"root"===n.type?[r("v-icon",{staticClass:"mdi-18px accent--text"},[e._v(" $vuetify.icons.globe ")])]:r("span",[e._v(e._s(n))])],2)]}}])},[r("span",{staticClass:"subheading font-weight-bold",attrs:{slot:"divider",disabled:e.readonly},slot:"divider"},[e._v("/")])])],1)},re=[],ne={props:{location:{type:Object,required:!0,validator:ee(!0)},readonly:{type:Boolean,default:!1},append:{type:Array,default:function(){return[]}},rootLocationDisabled:{type:Boolean,default:!1}},inject:["girderRest"],data:function(){return{loading:!1}},computed:{breadcrumb:function(){var e=this.append;return[].concat(Object(P["a"])(this.pathBreadcrumb),Object(P["a"])(e))}},asyncComputed:{pathBreadcrumb:{default:[],get:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,s,o,l,c,u,d,p,f,h,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,r=[],n=e.rootLocationDisabled,a=e.girderRest,i=e.location,s=a.user,o=Y(i),l=i.name,c=i._id,"folder"!==o){t.next=23;break}if(!l){t.next=11;break}r.unshift(e.extractCrumbData(i)),t.next=16;break;case 11:return t.next=13,e.girderRest.get("folder/".concat(c));case 13:u=t.sent,d=u.data,r.unshift(e.extractCrumbData(d));case 16:return t.next=18,e.girderRest.get("folder/".concat(c,"/rootpath"));case 18:p=t.sent,f=p.data,f.reverse().forEach((function(t){r.unshift(e.extractCrumbData(t.object))})),t.next=29;break;case 23:if("user"!==o&&"collection"!==o){t.next=29;break}return t.next=26,e.girderRest.get("".concat(o,"/").concat(c));case 26:h=t.sent,m=h.data,r.unshift(e.extractCrumbData(m));case 29:return n||(("users"===o||s&&r.length&&"user"===r[0].type)&&r.unshift({type:"users"}),("collections"===o||r.length&&"collection"===r[0].type)&&r.unshift({type:"collections"}),r.unshift({type:"root"})),e.loading=!1,t.abrupt("return",r);case 32:case"end":return t.stop()}}),t)})))()}}},created:function(){if(!ee(!this.rootLocationDisabled)(this.location))throw new Error("root location cannot be used when root-location-disabled is true")},methods:{extractCrumbData:function(e){return Object(f["a"])(Object(f["a"])({},e),{},{type:e.type?e.type:e._modelType,name:"user"!==e._modelType?e.name:e.login})}}},ae=ne,ie=(r("28e0"),r("2877")),se=r("6544"),oe=r.n(se),le=r("2bc5"),ce=r("f625"),ue=r("132d"),de=Object(ie["a"])(ae,te,re,!1,null,null,null),pe=de.exports;oe()(de,{VBreadcrumbs:le["a"],VBreadcrumbsItem:ce["a"],VIcon:ue["a"]});var fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{staticClass:"align-center girder-searchbar",attrs:{"no-gutters":"no-gutters"}},[e.hideSearchIcon?e._e():r("v-icon",{staticClass:"mr-3 mdi-24px",attrs:{color:"white"}},[e._v(" $vuetify.icons.search ")]),r("v-menu",{attrs:{"open-on-click":!1,value:e.searchText,"nudge-bottom":6,"offset-y":"offset-y","content-class":"girder-searchbar-menu",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-text-field",e._g({attrs:{placeholder:e.placeholder,light:"light",solo:"solo","hide-details":"hide-details",clearable:"clearable"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},n))]}}])},[r("v-list",{attrs:{dense:"dense"}},[e._l(e.quickResults,(function(t){return r("v-list-item",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],key:t._id,on:{click:function(r){return e.selectResult(t)}}},[e._t("searchresult",[r("v-list-item-action",{staticClass:"mr-2"},[r("v-icon",[e._v(e._s(e.$vuetify.icons.values[t._modelType]))])],1),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(t.name||e.formatUsername(t)))])],1)],null,t)],2)})),r("v-list-item",{directives:[{name:"show",rawName:"v-show",value:e.searchText&&0===e.quickResults.length&&!e.loading,expression:"searchText && quickResults.length === 0 && !loading"}]},[e._t("noresult",[r("v-list-item-action",[r("v-icon",[e._v("$vuetify.icons.alert")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("No results found for query '"+e._s(e.searchText)+"'")]),r("v-list-item-subtitle",[e._v(" Modify search parameters or refine your query. ")])],1)],null,{searchText:e.searchText})],2),r("v-list-item",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&e.showMore&&e.searchResults.length>e.maxQuickResults,expression:"!loading && showMore && searchResults.length > maxQuickResults"}],on:{click:function(t){return e.$emit("moreresults",e.searchParams)}}},[r("v-list-item-action",[r("v-icon",[e._v("$vuetify.icons.more")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("More")])],1)],1),e._l(Math.round(e.maxQuickResults/2),(function(t){return r("v-list-item",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],key:"skeleton-"+t},[r("v-list-item-action",[r("v-icon",{staticClass:"grey--text text--lighten-1"},[e._v(" $vuetify.icons.circle ")])],1),r("v-list-item-content",[r("v-list-item-title",{staticClass:"skeleton skeleton--text mb-2",style:{maxWidth:70+t%3*4+"%",height:"12px"}}),r("v-list-item-subtitle",{staticClass:"skeleton skeleton--text",style:{maxWidth:50-t%2*4+"%",height:"6px"}})],1)],1)}))],2)],1),e.hideOptionsMenu?e._e():r("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":"offset-y",left:"left","content-class":"girder-search-arrow-menu"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({attrs:{icon:"icon"}},n),[r("v-icon",{staticClass:"mdi-24px"},[e._v(" $vuetify.icons.settings ")])],1)]}}],null,!1,3696255673),model:{value:e.searchOptionsMenu,callback:function(t){e.searchOptionsMenu=t},expression:"searchOptionsMenu"}},[r("v-card",[r("v-card-actions",[r("v-col",{staticClass:"pa-0 flex-column",attrs:{"no-gutters":"no-gutters"}},[r("v-radio-group",{staticClass:"my-2",attrs:{"hide-details":"hide-details"},model:{value:e.internalSearchMode,callback:function(t){e.internalSearchMode=t},expression:"internalSearchMode"}},e._l(e.searchModeOptions,(function(e){return r("v-radio",{key:e.value,staticClass:"mb-1",attrs:{label:e.name,value:e.value}})})),1),r("v-divider"),e._l(e.searchTypeOptions,(function(t){return r("v-checkbox",{key:t.value,staticClass:"mt-1",attrs:{label:t.name,value:t.value,"hide-details":"hide-details"},model:{value:e.internalSearchTypes,callback:function(t){e.internalSearchTypes=t},expression:"internalSearchTypes"}})}))],2)],1)],1)],1)],1)},he=[],me=(r("a9e3"),[{name:"Prefix Search",value:"prefix"},{name:"Text Search",value:"text"}]),ve=me[0].value,ge=[{name:"User",value:"user"},{name:"Folder",value:"folder"},{name:"Item",value:"item"}],be=ge.map((function(e){return e.value})),ye={mixins:[G],props:{hideSearchIcon:{type:Boolean,default:!1},hideOptionsMenu:{type:Boolean,default:!1},maxQuickResults:{type:Number,default:6},placeholder:{type:String,default:null},searchModeOptions:{type:Array,default:function(){return me}},searchMode:{type:String,default:null},searchTypeOptions:{type:Array,default:function(){return ge}},searchTypes:{validator:function(e){return Array.isArray(e)||null===e},default:null},showMore:{type:Boolean,default:!1}},inject:["girderRest"],data:function(){return{searchText:"",lazySearchMode:this.searchMode||ve,lazySearchTypes:this.searchTypes||be,searchOptionsMenu:!1}},computed:{loading:function(){return this.counter.flag},quickResults:function(){return this.searchResults.slice(0,this.maxQuickResults)},searchParams:function(){return{q:this.searchText,mode:this.internalSearchMode,types:JSON.stringify(this.internalSearchTypes),limit:this.maxQuickResults+1}},internalSearchMode:{get:function(){return this.lazySearchMode},set:function(e){this.lazySearchMode=e,this.$emit("update:searchMode",e)}},internalSearchTypes:{get:function(){return this.lazySearchTypes},set:function(e){this.lazySearchTypes=e,this.$emit("update:searchTypes",e)}}},watch:{searchMode:function(e){this.lazySearchMode=e||ve},searchTypes:function(e){this.lazySearchTypes=e||be}},asyncComputed:{searchResults:{default:[],get:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=[],e.counter.inc(),t.prev=2,!e.searchText){t.next=9;break}return t.next=6,e.girderRest.get("resource/search",{params:e.searchParams});case 6:a=t.sent,i=a.data,r=(n=[]).concat.apply(n,Object(P["a"])(e.internalSearchTypes.map((function(e){return i[e]}))));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),e.$emit("error",t.t0.message||"Unknown error during search");case 14:return e.counter.dec(),t.abrupt("return",r);case 16:case"end":return t.stop()}}),t,null,[[2,11]])})))()}}},beforeCreate:function(){this.counter=new Q},methods:{selectResult:function(e){this.searchText="",this.$emit("select",e)}}},we=ye,_e=(r("e589"),r("3176"),r("8336")),xe=r("b0af"),ke=r("99d9"),Ce=r("ac7c"),Re=r("62ad"),je=r("ce7e"),Oe=r("8860"),Te=r("da13"),Se=r("1800"),Ve=r("5d23"),$e=r("e449"),Pe=r("67b6"),De=r("43a6"),Le=r("0fd9"),Fe=r("8654"),Ie=Object(ie["a"])(we,fe,he,!1,null,"4424a7cc",null),Ee=Ie.exports;oe()(Ie,{VBtn:_e["a"],VCard:xe["a"],VCardActions:ke["a"],VCheckbox:Ce["a"],VCol:Re["a"],VDivider:je["a"],VIcon:ue["a"],VList:Oe["a"],VListItem:Te["a"],VListItemAction:Se["a"],VListItemContent:Ve["a"],VListItemSubtitle:Ve["b"],VListItemTitle:Ve["c"],VMenu:$e["a"],VRadio:Pe["a"],VRadioGroup:De["a"],VRow:Le["a"],VTextField:Fe["a"]});var Ue={name:"AccessControl",components:{Breadcrumb:pe,Search:Ee},inject:["girderRest"],props:{model:{type:Object,required:!0,validator:function(e){return ee(!1)(e)&&"user"!==e._modelType}},hasPermission:{type:Boolean,required:!1,default:!1}},data:function(){return{public_:!1,access:null,recursive:!1,loading:!1}},computed:{groupsAndUsers:function(){return this.access?[].concat(Object(P["a"])(this.access.groups),Object(P["a"])(this.access.users)):[]},permissions:function(){return[{text:"Can view",value:0},{text:"Can edit",value:1},{text:"Is owner",value:2}]},publicText:function(){return this.public_?"Anyone can view this folder":"Access is required to view this folder"},recursiveText:function(){return this.recursive?"Also set this permissions on all subfolders":"Apply permissions only to this folder"}},watch:{model:function(){this.getAccessControlData()},access:function(e){this.$emit("update:hasPermission",!!e)}},created:function(){this.model&&this.getAccessControlData()},methods:{getAccessControlData:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.access=null,e.loading=!0,e.public_=e.model.public,t.prev=3,t.next=6,e.girderRest.get("".concat(e.model._modelType,"/").concat(e.model._id,"/access"));case 6:r=t.sent,n=r.data,e.access=n,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),e.access=null;case 14:e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},remove:function(e){var t=this.access.groups.indexOf(e);-1===t?(t=this.access.users.indexOf(e),-1!==t&&this.access.users.splice(t,1)):this.access.groups.splice(t,1)},groupOrUserSelected:function(e){this.groupsAndUsers.find((function(t){return t.id===e._id}))||this.access["".concat(e._modelType,"s")].push(Object(p["a"])({flags:[],id:e._id,level:0,name:e.login?"".concat(e.firstName," ").concat(e.lastName):e.name},e.login?"login":"description",e.login||e.description))},save:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={users:e.access.users.map((function(e){var t=e.id,r=e.level,n=e.flags;return{id:t,level:r,flags:n}})),groups:e.access.groups.map((function(e){var t=e.id,r=e.level,n=e.flags;return{id:t,level:r,flags:n}}))},n={access:JSON.stringify(r),public:e.public_,publicFlags:[],recurse:e.recursive,progress:!0},t.next=4,e.girderRest.put("".concat(e.model._modelType,"/").concat(e.model._id,"/access"),Object(b["stringify"])(n));case 4:e.$emit("model-access-changed",e.model),e.$emit("close");case 6:case"end":return t.stop()}}),t)})))()}}},Me=Ue,Ae=(r("637b"),r("b974")),ze=r("2fa4"),Ne=r("e0c7"),Be=r("b73d"),qe=Object(ie["a"])(Me,V,$,!1,null,"4dbc3098",null),Ge=qe.exports;oe()(qe,{VBtn:_e["a"],VCard:xe["a"],VCardActions:ke["a"],VCardText:ke["b"],VCardTitle:ke["c"],VIcon:ue["a"],VList:Oe["a"],VListItem:Te["a"],VListItemAction:Se["a"],VListItemContent:Ve["a"],VListItemSubtitle:Ve["b"],VListItemTitle:Ve["c"],VSelect:Ae["a"],VSpacer:ze["a"],VSubheader:Ne["a"],VSwitch:Be["a"]});var Je=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"girder-authentication-component"},[r("v-tabs",{attrs:{"background-color":"primary",dark:"dark"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("v-tabs-slider",{attrs:{color:"yellow"}}),r("v-tab",{key:"login"},[e._v(" Log In ")]),e.register?r("v-tab",{key:"registration"},[e._v(" Register ")]):e._e()],1),r("v-tabs-items",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("v-tab-item",{key:"login-box"},[r("girder-login",e._b({attrs:{"oauth-providers":e.oauthProviders},on:{forgotpassword:function(t){return e.$emit("forgotpassword")}}},"girder-login",{forceOtp:e.forceOtp,forgotPasswordUrl:e.forgotPasswordUrl,forgotPasswordRoute:e.forgotPasswordRoute,hideForgotPassword:e.hideForgotPassword},!1))],1),e.register?r("v-tab-item",{key:"registration-box"},[r("girder-registration",{attrs:{"oauth-providers":e.oauthProviders}})],1):e._e()],1)],1)},He=[],Ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-widget"},[e._l(e.alerts.errors,(function(t){return r("v-alert",{key:t,staticClass:"mt-0",attrs:{value:!!t,dismissible:"dismissible",transition:"scale-transition",type:"error"}},[e._v(" "+e._s(t)+" ")])})),r("v-container",[r("v-form",{ref:"login",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[!e.otpFormVisible||e.forceOtp?r("v-text-field",{attrs:{rules:e.nonEmptyRules,label:"Username or e-mail",autofocus:"autofocus","prepend-icon":"$vuetify.icons.user",type:"text"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}):e._e(),!e.otpFormVisible||e.forceOtp?r("v-text-field",{attrs:{rules:e.nonEmptyRules,type:"password",label:"Password","prepend-icon":"$vuetify.icons.lock"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}):e._e(),e.otpFormVisible||e.forceOtp?r("v-text-field",{attrs:{rules:e.otpRules,type:"text",label:"Authentication code","prepend-icon":"$vuetify.icons.otp"},model:{value:e.otp,callback:function(t){e.otp=t},expression:"otp"}}):e._e(),r("v-card-actions",[r("v-btn",{staticClass:"ml-0",attrs:{disabled:e.inProgress,loading:e.inProgress,type:"submit",color:"primary"}},[r("v-icon",{attrs:{left:"left"}},[e._v(" $vuetify.icons.login ")]),e._v(" "+e._s(e.otpFormVisible?"Verify code":"Login")+" ")],1),e.hideForgotPassword?e._e():[r("v-spacer"),r("v-btn",{attrs:{to:e.forgotPasswordRoute,href:e.forgotPasswordUrl,text:"text",color:"primary"},on:{click:function(t){return e.$emit("forgotpassword")}}},[e._v(" Forgot Password? ")])]],2)],1)],1),e.oauthProviders&&e.oauthProviders.length?[r("v-divider"),r("girder-oauth",{attrs:{providers:e.oauthProviders}})]:e._e()],2)},We=[],Qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"oauth-widget"},[r("h4",[e._v("Or "+e._s(e.verb)+" with OAuth")]),e._l(e.providers,(function(t){return r("v-btn",{key:t.id,staticClass:"ml-0 mr-3",attrs:{dark:e.iconMap[t.id].dark,color:e.iconMap[t.id].color,href:t.url}},[r("v-icon",{attrs:{left:"left"}},[e._v(" "+e._s(e.$vuetify.icons.values[e.iconMap[t.id].icon])+" ")]),e._v(" "+e._s(t.name)+" ")],1)}))],2)},Ye=[],Xe={github:{dark:!0,icon:"github"},google:{dark:!0,icon:"google",color:"#3367d6"},linkedin:{dark:!0,icon:"linkedin",color:"#283e4a"},bitbucket:{dark:!1,icon:"bitbucket"},box:{dark:!0,icon:"box_com",color:"#0071f7"},globus:{dark:!0,icon:"globus",color:"#335a95"}},Ze={props:{verb:{type:String,default:"sign in"},providers:{type:Array,required:!0}},data:function(){return{enabledProviders:[],iconMap:Xe}}},et=Ze,tt=r("a523"),rt=Object(ie["a"])(et,Qe,Ye,!1,null,null,null),nt=rt.exports;oe()(rt,{VBtn:_e["a"],VContainer:tt["a"],VIcon:ue["a"]});var at="authentication must include a one-time password",it=[function(e){return!!e||"Item is required"}],st=[function(e){var t="6 digit number";try{return parseInt(e,10)&&6===String(e).length||t}catch(r){return t}}],ot={inject:["girderRest"],components:{GirderOauth:nt},props:{forceOtp:{type:Boolean,default:!1},forgotPasswordUrl:{type:String,default:null},forgotPasswordRoute:{type:Object,default:null},hideForgotPassword:{type:Boolean,default:!1},oauthProviders:{type:Array,default:function(){return[]}}},data:function(){return{username:"",password:"",otp:null,inProgress:!1,alerts:{errors:[]},nonEmptyRules:it,otpRules:st,otpFormVisible:!1}},methods:{login:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.login.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.alerts.errors=[],e.inProgress=!0,t.prev=4,t.next=7,e.girderRest.login(e.username,e.password,e.otp);case 7:e.password="",e.otp=null,e.otpFormVisible=!1,t.next=21;break;case 12:if(t.prev=12,t.t0=t["catch"](4),t.t0.response&&401===t.t0.response.status){t.next=19;break}throw e.alerts.errors.push("Unknown error."),t.t0;case 19:r=t.t0.response.data.message,r&&r.indexOf(at)>=0?(e.otp=null,e.otpFormVisible=!0,e.$refs.login.resetValidation()):e.alerts.errors.push(r||"Unauthorized.");case 21:return t.prev=21,e.inProgress=!1,t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[4,12,21,24]])})))()}}},lt=ot,ct=r("0798"),ut=r("4bd4"),dt=Object(ie["a"])(lt,Ke,We,!1,null,null,null),pt=dt.exports;oe()(dt,{VAlert:ct["a"],VBtn:_e["a"],VCardActions:ke["a"],VContainer:tt["a"],VDivider:je["a"],VForm:ut["a"],VIcon:ue["a"],VSpacer:ze["a"],VTextField:Fe["a"]});var ft=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register-widget"},[e._l(e.alerts.errors,(function(t){return r("v-alert",{key:t,staticClass:"mt-0",attrs:{value:!0,dismissible:"dismissible",transition:"scale-transition",type:"error"}},[e._v(" "+e._s(t)+" ")])})),e._l(e.alerts.infos,(function(t){return r("v-alert",{key:t,staticClass:"mt-0",attrs:{value:!0,dismissible:"dismissible",transition:"scale-transition",type:"info"}},[e._v(" "+e._s(t)+" ")])})),r("v-container",[r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[r("v-text-field",{attrs:{rules:e.nonEmptyRules,label:"Username",type:"text",autofocus:"autofocus"},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}}),r("v-text-field",{attrs:{rules:e.nonEmptyRules,label:"Email",type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-text-field",{attrs:{rules:e.nonEmptyRules,label:"First Name",type:"text"},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),r("v-text-field",{attrs:{rules:e.nonEmptyRules,label:"Last Name",type:"text"},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),r("v-text-field",{attrs:{rules:e.nonEmptyRules,type:"password",label:"Password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-text-field",{attrs:{rules:e.retypeMustMatchPasswordRules,type:"password",label:"Retype password"},model:{value:e.retypePassword,callback:function(t){e.retypePassword=t},expression:"retypePassword"}}),r("v-btn",{staticClass:"ml-0",attrs:{loading:e.inProgress,type:"submit",color:"primary"}},[e._v(" Register ")])],1)],1),e.oauthProviders&&e.oauthProviders.length?[r("v-divider"),r("girder-oauth",{attrs:{providers:e.oauthProviders,verb:"register"}})]:e._e()],2)},ht=[],mt={inject:["girderRest"],components:{GirderOauth:nt},props:{oauthProviders:{type:Array,default:function(){return[]}}},data:function(){var e=this,t=[function(e){return!!e||"Item is required"}],r=[].concat(t,[function(t){return t===e.password||"Passwords must match"}]);return{login:"",email:"",firstName:"",lastName:"",password:"",retypePassword:"",retypePasswordErrors:[],inProgress:!1,alerts:{errors:[],infos:[]},nonEmptyRules:t,retypeMustMatchPasswordRules:r}},methods:{register:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.inProgress=!0,e.alerts.errors=[],e.alerts.infos=[],t.prev=5,t.next=8,e.girderRest.register(e.login,e.email,e.firstName,e.lastName,e.password);case 8:r=t.sent,r.data.authToken||(e.alerts.infos.push("Registration needs email verification or administrator approval. \nCheck your email to continue."),e.$refs.form.reset()),t.next=20;break;case 12:if(t.prev=12,t.t0=t["catch"](5),t.t0.response&&400===t.t0.response.status){t.next=19;break}throw e.alerts.errors.push("Unknown error."),t.t0;case 19:e.alerts.errors.push(t.t0.response.data.message||"Invalid registration.");case 20:return t.prev=20,e.inProgress=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[5,12,20,23]])})))()}}},vt=mt,gt=Object(ie["a"])(vt,ft,ht,!1,null,null,null),bt=gt.exports;oe()(gt,{VAlert:ct["a"],VBtn:_e["a"],VContainer:tt["a"],VDivider:je["a"],VForm:ut["a"],VTextField:Fe["a"]});var yt={inject:["girderRest"],components:{GirderLogin:pt,GirderRegistration:bt},props:{register:{type:Boolean,default:!1},oauth:{type:Boolean,default:!1},forgotPasswordUrl:{type:String,default:null},forgotPasswordRoute:{type:[Object,String],default:null},forceOtp:{type:Boolean,default:!1},hideForgotPassword:{type:Boolean,default:!1}},data:function(){return{activeTab:null}},asyncComputed:{oauthProviders:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.oauth){t.next=12;break}return t.prev=1,t.next=4,e.girderRest.get("oauth/provider",{params:{redirect:"".concat(window.location.href).concat(w,"{girderToken}").concat(_),list:!0}});case 4:return t.abrupt("return",t.sent.data);case 7:return t.prev=7,t.t0=t["catch"](1),t.abrupt("return",[]);case 10:t.next=13;break;case 12:return t.abrupt("return",[]);case 13:case"end":return t.stop()}}),t,null,[[1,7]])})))()}}},wt=yt,_t=r("71a3"),xt=r("c671"),kt=r("fe57"),Ct=r("aac8"),Rt=r("9a96"),jt=Object(ie["a"])(wt,Je,He,!1,null,null,null),Ot=jt.exports;oe()(jt,{VCard:xe["a"],VTab:_t["a"],VTabItem:xt["a"],VTabs:kt["a"],VTabsItems:Ct["a"],VTabsSlider:Rt["a"]});var Tt=Ot,St=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("girder-data-table",{staticClass:"girder-file-browser",attrs:{draggable:e.draggable,rows:e.rows,options:e.options,"items-per-page-options":e.itemsPerPageOptions,"server-items-length":e.serverItemsLength,loading:e.loading,selectable:e.internalSelectable},on:{"update:options":function(t){e.options=t},rowclick:e.rowClick,"row-right-click":function(t){return e.$emit("row-right-click",arguments[0],arguments[1])},drag:function(t){return e.$emit("drag",t)},dragstart:function(t){return e.$emit("dragstart",t)},dragend:function(t){return e.$emit("dragend",t)},drop:function(t){return e.$emit("drop",t)}},scopedSlots:e._u([{key:"header",fn:function(t){var n=t.props,a=t.on;return[r("thead",[r("tr",{staticClass:"secondary",class:e.$vuetify.theme.dark?"darken-2":"lighten-5"},[e.internalSelectable?r("th",{staticClass:"pl-3 pr-0",attrs:{width:"1%"}},[r("v-checkbox",{staticClass:"pr-2",attrs:{"input-value":n.everyItem,indeterminate:e.internalValue.length>0&&!n.everyItem,color:"accent","hide-details":"hide-details"},nativeOn:{click:function(e){return a["toggle-select-all"](!n.everyItem)}}})],1):e._e(),r("th",{staticClass:"pl-3",attrs:{colspan:"10",width:"99%"}},[r("v-row",{staticClass:"ma-1"},[e._t("breadcrumb",null,null,{location:e.location,changeLocation:e.changeLocation,rootLocationDisabled:e.rootLocationDisabled}),r("v-spacer"),e._t("headerwidget",null,null,{location:e.location,changeLocation:e.changeLocation,rootLocationDisabled:e.rootLocationDisabled})],2)],1)])])]}},{key:"row-widget",fn:function(t){return[e._t("row-widget",null,null,t)]}}],null,!0),model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})},Vt=[],$t=(r("b64b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-data-table",{staticClass:"girder-data-table",attrs:{"headers-length":4,value:e.value,options:e.options,"footer-props":{"items-per-page-options":e.itemsPerPageOptions},items:e.rows,"server-items-length":e.serverItemsLength,loading:!!e.loading&&"accent","show-select":"show-select","hide-default-header":"hide-default-header","item-key":"_id"},on:{input:function(t){return e.$emit("input",t)},"update:options":function(t){return e.$emit("update:options",t)}},scopedSlots:e._u([{key:"header",fn:function(t){return[e._t("header",null,null,t)]}},{key:"item",fn:function(t){return[r("tr",{key:t.item._id,staticClass:"itemRow",class:e.getRowClass(t.item),attrs:{draggable:e.draggable,active:t.isSelected},on:{click:function(r){return e.handleRowSelect(r,t)},drag:function(r){return e.emitDrag("drag",r,[t])},dragstart:function(r){return e.emitDrag("dragstart",r,[t])},dragend:function(r){return e.emitDrag("dragend",r,[t])}}},[e.selectable?r("td",{staticClass:"pl-3 pr-0"},[r("v-checkbox",{attrs:{"input-value":t.isSelected,accent:"accent","hide-details":"hide-details"},on:{change:t.select}})],1):e._e(),r("td",{staticClass:"pl-3",attrs:{colspan:"2"},on:{contextmenu:function(r){return e.$emit("row-right-click",t.item,r)}}},[r("span",{staticClass:"text-container nobreak",class:e.getItemClass(t.item),on:{click:function(r){return r.stopPropagation(),e.$emit("rowclick",t.item)}}},[r("v-icon",{staticClass:"pr-2",attrs:{color:t.isSelected?"accent":""}},[e._v(e._s(e.$vuetify.icons.values[t.item.icon]))]),e._v(" "+e._s(t.item.name)+" "),e._t("row-widget",null,null,t)],2)]),r("td",{staticClass:"text-right nobreak"},[e._v(" "+e._s(t.item.humanSize)+" ")])])]}},{key:"no-data",fn:function(){return[r("div",{staticClass:"text-center",attrs:{width:"100%"}},[e._v(" No Data Available ")])]},proxy:!0},{key:"no-results",fn:function(){return[r("div",{staticClass:"text-center",attrs:{width:"100%"}},[e._v(" No Data Available ")])]},proxy:!0}],null,!0)})}),Pt=[],Dt=(r("4de4"),{props:{draggable:{type:Boolean,default:!1},loading:{type:Boolean,required:!0},options:{type:Object,required:!0},rows:{type:Array,required:!0},selectable:{type:Boolean,required:!0},serverItemsLength:{type:Number,required:!0},value:{type:Array,default:function(){return[]}},itemsPerPageOptions:{type:Array,default:function(){return[10,25,50]}}},data:function(){return{lastCheckBoxIdx:null}},methods:{getLocationType:Y,isRootLocation:X,handleRowSelect:function(e,t){var r=this,n=e.shiftKey;if(this.selectable){if(t.isSelected=!t.isSelected,n&&null!==this.lastCheckBoxIdx){var a=[this.lastCheckBoxIdx,t.index+1].sort(),s=Object(i["a"])(a,2),o=s[0],l=s[1],c=this.rows.slice(o,l).filter((function(e){return void 0===r.value.find((function(t){return t._id===e._id}))}));this.$emit("input",c.concat(this.value))}this.lastCheckBoxIdx=t.index}else this.$emit("rowclick",t.item)},getRowClass:function(e){var t=!this.selectable&&"folder"===Y(e)||X(e)||"user"===Y(e);return{"select-cursor":t,"not-public":e.notPublic}},getItemClass:function(e){var t="item"!==Y(e);return{"select-cursor":t}},emitDrag:function(e,t,r){var n=JSON.stringify(r.map((function(e){var t=e.item;return{_id:t._id,_modelType:t._modelType}})));t.dataTransfer.setData("application/x-girder-items",n),this.$emit(e,{event:t,items:r})}}}),Lt=Dt,Ft=(r("8d4c"),r("8fea")),It=Object(ie["a"])(Lt,$t,Pt,!1,null,null,null),Et=It.exports;oe()(It,{VCheckbox:Ce["a"],VDataTable:Ft["a"],VIcon:ue["a"]});var Ut="folder",Mt="item",At={components:{GirderDataTable:Et},mixins:[B],inject:["girderRest"],props:{draggable:{type:Boolean,default:!1},location:{type:Object,required:!0,validator:ee(!0)},selectable:{type:Boolean,default:!1},noRootLocation:{type:Boolean,default:!1},upload:{type:Boolean,default:!1},rootLocationDisabled:{type:Boolean,default:!1},value:{type:Array,default:function(){return[]}},initialItemsPerPage:{type:Number,default:10},itemsPerPageOptions:{type:Array,default:function(){return[10,25,50]}}},data:function(){return{options:{itemsPerPage:this.initialItemsPerPage,page:1},internalRefreshCounter:0,rows:[],rowsLoading:!1,lazyValue:this.value||[]}},computed:{loading:function(){return this.rowsLoading},serverItemsLength:function(){return Object.values(this.counts).reduce((function(e,t){return e+t}),0)},internalSelectable:function(){return this.selectable&&this.location&&!X(this.location)},internalValue:{get:function(){return this.lazyValue},set:function(e){this.lazyValue=e,this.$emit("input",e)}}},asyncComputed:{counts:{default:{nFolders:0,nItems:0,nUsers:0,nCollections:0},get:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={nFolders:0,nItems:0,nUsers:0,nCollections:0},n=Y(e.location),a=e.location._id,-1===["folder","user","collection"].indexOf(n)){t.next=9;break}return t.next=6,e.girderRest.get("".concat(n,"/").concat(a,"/details"));case 6:return i=t.sent,s=i.data,t.abrupt("return",Object(f["a"])(Object(f["a"])({},r),{nFolders:s.nFolders||0,nItems:s.nItems||0}));case 9:if("users"!==n&&"collections"!==n){t.next=15;break}return t.next=12,e.girderRest.get("".concat(e.getResourceType(n),"/details"));case 12:return o=t.sent,l=o.data,t.abrupt("return",Object(f["a"])(Object(f["a"])({},r),Object(p["a"])({},Object.keys(l)[0],Object.values(l)[0])));case 15:if("root"!==n){t.next=17;break}return t.abrupt("return",Object(f["a"])(Object(f["a"])({},r),{nUsers:1,nCollections:1}));case 17:return t.abrupt("return",r);case 18:case"end":return t.stop()}}),t)})))()},watch:function(){return[this.internalRefreshCounter,this.location,this.girderRest.user]}}},watch:{location:function(e){ee(!this.rootLocationDisabled)(e)&&(this.options.page=1,this.internalValue=[])},value:function(e){this.lazyValue=e},counts:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchPaginatedRows();case 2:e.rows=t.sent;case 3:case"end":return t.stop()}}),t)})))()},options:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchPaginatedRows();case 2:e.rows=t.sent;case 3:case"end":return t.stop()}}),t)})))()}},created:function(){if(!ee(!this.rootLocationDisabled)(this.location))throw new Error("root location cannot be used when root-location-disabled is true")},methods:{rowClick:function(e){this.$emit("rowclick",e,this.location),"item"!==Y(e)&&this.changeLocation(e)},changeLocation:function(e){var t=this.location,r=Y(e),n=Y(t);t._id===e._id&&n===r||this.$emit("update:location",e)},refresh:function(){this.selected=[],this.internalRefreshCounter+=1},fetchPaginatedRows:function(){var e=this.location,t=this.counts;if(t.nFolders||t.nItems)return this.fetchPaginatedFolderRows();var r=Y(e);if("users"===r||"collections"===r){if(t.nUsers||t.nCollections){var n=Z(e);return this.fetchPaginatedCollectionOrUserRows(n)}}else if("root"===r)return this.generateRootRows();return[]},fetchPaginatedFolderRows:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,s,o,l,c,u,d,p,h,m,v,g,b,y,w;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.rowsLoading=!0,n=e.counts,a=n.nFolders,i=n.nItems,s=e.location,o=e.options,l=o.page,c=o.itemsPerPage,u=!1,s.created||"folder"!==s._modelType){t.next=7;break}return t.next=6,e.girderRest.get("folder/".concat(s._id));case 6:u=!t.sent.data.public;case 7:return d=[],p=-1===c?0:(l-1)*c,h=Math.max(a-p,0),0!==h&&(m={parentType:s._modelType,parentId:s._id,limit:-1===c?0:c,offset:p},d.push(e.girderRest.get(Ut,{params:m}))),v=Math.max(p-a,0),g=Math.max(i-v,0),g>0&&(-1===c||c-h>0)&&(b={folderId:s._id,limit:-1===c?0:c-h,offset:v},d.push(e.girderRest.get(Mt,{params:b}))),t.next=16,Promise.all(d);case 16:return y=t.sent.map((function(e){return e.data})),w=(r=[].concat).apply.apply(r,Object(P["a"])(y)).map((function(t){return Object(f["a"])(Object(f["a"])({},t),{},{humanSize:t.size?e.formatSize(t.size):"",icon:e.getModelIcon(t),notPublic:"folder"===t._modelType?!t.public:u})})),e.rowsLoading=!1,t.abrupt("return",w);case 20:case"end":return t.stop()}}),t)})))()},fetchPaginatedCollectionOrUserRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,a,i,s,o,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.rowsLoading=!0,n=t.options,a=n.page,i=n.itemsPerPage,r.next=4,t.girderRest.get(e,{params:{limit:i>=0?i:null,offset:(a-1)*i}});case 4:return s=r.sent,o=s.data,l=o.map((function(e){return Object(f["a"])(Object(f["a"])({},e),{},{name:"user"===e._modelType?"".concat(e.firstName," ").concat(e.lastName):e.name,humanSize:e.size?t.formatSize(e.size):"",icon:e._modelType})})),t.rowsLoading=!1,r.abrupt("return",l);case 9:case"end":return r.stop()}}),r)})))()},generateRootRows:function(){var e=[{_modelType:"collections",name:"Collections",icon:"collection"}];return this.girderRest.user&&e.push({_modelType:"users",name:"Users",icon:"user"}),e},getResourceType:function(e){switch(e){case"collections":return"collection";case"users":return"user";default:return""}},getModelIcon:function(e){switch(e._modelType){case"folder":return e.public?"folder":"folderNonPublic";default:return e._modelType in this.$vuetify.icons.values?e._modelType:"file"}}}},zt=At,Nt=Object(ie["a"])(zt,St,Vt,!1,null,null,null),Bt=Nt.exports;oe()(Nt,{VCheckbox:Ce["a"],VRow:Le["a"],VSpacer:ze["a"]});var qt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"data-details"},[r("v-toolbar",{attrs:{flat:"flat",dark:"dark",dense:"dense",color:"primary"}},[r("v-toolbar-title",{staticClass:"subtitle-1"},[r("v-icon",{staticClass:"pr-2 mdi-18px"},[e._v(" "+e._s(e.icon)+" ")]),e._v(e._s(e.title)+" ")],1),r("v-spacer"),e.datum?r("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({attrs:{icon:"icon"}},n),[r("v-icon",{staticClass:"mdi-18px"},[e._v(" "+e._s(e.$vuetify.icons.edit)+" ")])],1)]}}],null,!1,3832453826),model:{value:e.showUpsert,callback:function(t){e.showUpsert=t},expression:"showUpsert"}},[r("girder-upsert-folder",{key:e.datum._id,attrs:{edit:!0,location:e.datum},on:{dismiss:function(t){e.showUpsert=!1}}})],1):e._e()],1),e.details&&e.details.description?r("girder-markdown",{staticClass:"mx-3 mt-2",attrs:{text:e.details.description}}):e._e(),r("girder-detail-list",{attrs:{rows:e.info,title:"Info"}}),e.meta.length?r("girder-detail-list",{attrs:{rows:e.meta,title:"Meta"},scopedSlots:e._u([{key:"row",fn:function(t){return[r("v-row",{attrs:{justify:"space-between"}},[r("v-col",{staticClass:"shrink py-1 body-2 font-weight-bold"},[e._v(" "+e._s(t.datum.key)+" ")]),r("v-col",{staticClass:"py-1 body-2 d-flex justify-end"},[e._v(" "+e._s(t.datum.value)+" ")])],1)]}}],null,!1,1429079958)}):e._e(),e.files.length?r("girder-detail-list",{attrs:{title:"Files ("+e.files.length+")",rows:e.files}}):e._e(),e.actions.length?r("girder-detail-list",{attrs:{clickable:!0,rows:e.actions,title:"Actions"},on:{click:e.handleAction},scopedSlots:e._u([{key:"row",fn:function(t){return[r("v-list-item-icon",{staticClass:"mr-1"},[r("v-icon",{staticClass:"pr-2",attrs:{color:t.datum.color}},[e._v(" "+e._s(t.datum.icon||e.$vuetify.icons.values[t.datum.iconKey])+" ")])],1),r("v-list-item-content",{class:t.datum.color+"--text"},[e._v(" "+e._s(t.datum.name)+" ")])]}}],null,!1,353723984)}):e._e()],1)},Gt=[],Jt=(r("caad"),r("2532"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.rows.length?r("v-list",{attrs:{dense:"dense"}},[r("v-subheader",{staticClass:"subtitle-1 font-weight-bold pl-4"},[e._v(" "+e._s(e.title)+" ")]),e._l(e.rows,(function(t,n){return[r("v-list-item",e._g({key:n+"-li",staticClass:"allow-select",attrs:{href:t.href,target:t.target}},e.clickable?{click:function(){return e.$emit("click",t)}}:{}),[e._t("row",[r("v-list-item-content",[r("div",{staticClass:"body-2 no-overflow"},[e._v(" "+e._s(t)+" ")])])],{datum:t})],2),n<e.rows.length-1?r("v-divider",{key:n+"-divider",staticClass:"mx-3"}):e._e()]}))],2):e._e()}),Ht=[],Kt={props:{title:{type:String,required:!0},rows:{type:Array,required:!0},clickable:{type:Boolean,default:!1}}},Wt=Kt,Qt=(r("dfab"),Object(ie["a"])(Wt,Jt,Ht,!1,null,"77a8b14c",null)),Yt=Qt.exports;oe()(Qt,{VDivider:je["a"],VList:Oe["a"],VListItem:Te["a"],VListItemContent:Ve["a"],VSubheader:Ne["a"]});var Xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"g-md-viewer",domProps:{innerHTML:e._s(e.markdown)}})},Zt=[],er=r("d4cd"),tr=r.n(er),rr={props:{text:{default:"",type:String}},computed:{markdown:function(){return tr()({linkify:!0}).render(this.text)}}},nr=rr,ar=(r("23cbe"),Object(ie["a"])(nr,Xt,Zt,!1,null,null,null)),ir=ar.exports,sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{on:{submit:function(t){return t.preventDefault(),e.upsert(t)}}},[r("v-card",{attrs:{flat:"flat"}},[r("v-row",{staticClass:"pa-2 flex-column",attrs:{"no-gutters":"no-gutters"}},[e._t("header",[r("v-card-title",{staticClass:"pb-0",attrs:{"primary-title":"primary-title"}},[r("h5",{staticClass:"display-1"}),e._v(e._s(e.edit?"Edit Folder":"Create New Folder")+" ")])]),r("v-card-text",[r("v-text-field",{ref:"folderName",attrs:{autofocus:"autofocus",label:"Folder Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("girder-breadcrumb",e._b({staticClass:"mb-3",attrs:{readonly:"readonly"}},"girder-breadcrumb",{location:e.location,append:e.append},!1)),r("girder-markdown-editor",{attrs:{label:"Description (Optional)"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),r("v-alert",{attrs:{value:!!e.error,type:"error",dismissible:"dismissible",transition:"scale-transition"}},[e._v(" "+e._s(e.error)+" ")])],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{text:"text"},on:{click:function(t){return e.$emit("dismiss")}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{disabled:!e.name,depressed:"depressed",color:"primary",type:"submit"}},[e._v(" "+e._s(e.edit?"Save Changes":"Create Folder")+" ")])],1)],2)],1)],1)},or=[],lr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"girder-markdown-editor"},[r("v-tabs",{staticClass:"md-tab",model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("v-tab",{key:"edit"},[e._v(" Edit ")]),r("v-tab-item",[r("v-textarea",{attrs:{label:e.label,placeholder:e.placeholder,"hide-details":"hide-details",filled:"filled","single-line":"single-line"},model:{value:e.text_,callback:function(t){e.text_=t},expression:"text_"}})],1),r("v-tab",{key:"preview"},[e._v(" Preview ")]),r("v-tab-item",{staticClass:"md-preview pa-2 grey lighten-3"},[r("girder-markdown",{attrs:{text:e.text_}})],1)],1),r("v-toolbar",{attrs:{dark:"dark",color:"secondary darken-2"}},[r("span",{staticClass:"hidden-xs-only"},[e._v(" Supports "),r("a",{attrs:{href:"https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet"}},[e._v("Markdown")])]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{class:{active:0===e.activeTab},attrs:{text:"text"},on:{click:function(t){e.activeTab=0}}},[r("v-row",{staticClass:"flex-column align-center justify-content",attrs:{"no-gutters":"no-gutters"}},[r("v-icon",{staticClass:"mdi-24px"},[e._v(" $vuetify.icons.edit ")]),r("span",{staticClass:"caption text-capitalize"},[e._v("Write")])],1)],1),r("v-btn",{class:{active:1===e.activeTab},attrs:{text:"text"},on:{click:function(t){e.activeTab=1}}},[r("v-row",{staticClass:"flex-column align-center justify-content",attrs:{"no-gutters":"no-gutters"}},[r("v-icon",{staticClass:"mdi-24px"},[e._v(" $vuetify.icons.preview ")]),r("span",{staticClass:"caption text-capitalize"},[e._v("Preview")])],1)],1)],1)],1)],1)},cr=[],ur={components:{GirderMarkdown:ir},model:{prop:"text",event:"changed"},props:{placeholder:{default:null,type:String},text:{default:"",type:String},label:{type:String,default:""}},data:function(){return{activeTab:0,text_:this.text}},watch:{text:function(){this.text_=this.text},text_:function(){this.$emit("changed",this.text_)}}},dr=ur,pr=(r("0e3a"),r("a844")),fr=r("71d9"),hr=r("2a7f"),mr=Object(ie["a"])(dr,lr,cr,!1,null,null,null),vr=mr.exports;oe()(mr,{VBtn:_e["a"],VIcon:ue["a"],VRow:Le["a"],VSpacer:ze["a"],VTab:_t["a"],VTabItem:xt["a"],VTabs:kt["a"],VTextarea:pr["a"],VToolbar:fr["a"],VToolbarItems:hr["a"]});var gr="folder",br={components:{GirderBreadcrumb:pe,GirderMarkdownEditor:vr},props:{location:{type:Object,required:!0,validator:ee(!1)},edit:{type:Boolean,default:!1},preUpsert:{type:Function,default:function(){}},postUpsert:{type:Function,default:function(){}}},inject:["girderRest"],data:function(){return{name:"",description:"",error:""}},computed:{append:function(){return this.edit?[]:[this.name||"New Folder"]}},mounted:function(){this.edit&&this.loadFolder(this.location._id)},methods:{upsert:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.error="",t.prev=1,t.next=4,e.preUpsert();case 4:if(!e.edit){t.next=9;break}return t.next=7,e.girderRest.put("".concat(gr,"/").concat(e.location._id),Object(b["stringify"])({name:e.name,description:e.description}));case 7:t.next=11;break;case 9:return t.next=11,e.girderRest.post(gr,Object(b["stringify"])({parentType:e.location._modelType,parentId:e.location._id,name:e.name,description:e.description,reuseExisting:!1}));case 11:return t.next=13,e.postUpsert();case 13:e.name="",e.description="",e.$emit("done"),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](1),e.$emit("error",{type:"upsert",error:t.t0}),e.setError(t.t0);case 22:case"end":return t.stop()}}),t,null,[[1,18]])})))()},loadFolder:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.error="",r.prev=1,r.next=4,t.girderRest.get("".concat(gr,"/").concat(e));case 4:n=r.sent,a=n.data,t.name=a.name,t.description=a.description,r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](1),t.$emit("error",{type:"load",error:r.t0}),t.setError(r.t0);case 14:case"end":return r.stop()}}),r,null,[[1,10]])})))()},setError:function(e){if(e.response){var t=e.response.data,r=void 0===t?{}:t,n=r.type,a=void 0===n?"unknown":n,i=r.message,s=r.field,o=void 0===s?"unknown":s;this.error="".concat(a," error on ").concat(o,": ").concat(i||e.message)}else this.error="Unknown error: ".concat(e.message)}}},yr=br,wr=Object(ie["a"])(yr,sr,or,!1,null,null,null),_r=wr.exports;function xr(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(["resource","folder","item","file"].indexOf(t)<0)throw new Error("".concat(t," is not downloadable"));var a=r?"".concat(r,"/"):"";return"".concat(e,"/").concat(t,"/").concat(a,"download").concat(n)}oe()(wr,{VAlert:ct["a"],VBtn:_e["a"],VCard:xe["a"],VCardActions:ke["a"],VCardText:ke["b"],VCardTitle:ke["c"],VForm:ut["a"],VRow:Le["a"],VSpacer:ze["a"],VTextField:Fe["a"]});var kr=[{value:"size",name:"Size: ",transform:B.methods.formatSize},{value:"created",name:"Created on ",transform:N.methods.formatDate},{value:"updated",name:"Updated on ",transform:N.methods.formatDate},{value:"_id",name:"Unique ID: "}],Cr=[{for:["item"],name:"View Item",iconKey:"view",color:"primary",generateHref:function(e,t){return xr(e,t[0]._modelType,t[0]._id,"?contentDisposition=inline")},target:"_blank"},{for:["item"],name:"Download",iconKey:"download",color:"secondary",generateHref:function(e,t){return xr(e,t[0]._modelType,t[0]._id)},target:"_blank"},{for:["folder","multi"],name:"Download (zip)",iconKey:"download",color:"secondary",generateHref:function(e,t){var r={item:[],folder:[]};return t.forEach((function(e){return r[e._modelType].push(e._id)})),xr(e,"resource",null,"?resources=".concat(JSON.stringify(r)))},target:"_blank"},{for:["item","folder","multi"],name:"Delete",iconKey:"delete",color:"error",handler:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.value,n={item:[],folder:[]},r.forEach((function(e){return n[e._modelType].push(e._id)})),t.next=5,e.girderRest.delete("resource",{params:{resources:JSON.stringify(n),progress:!0}});case 5:case"end":return t.stop()}}),t)})))()}}],Rr={components:{GirderDetailList:Yt,GirderMarkdown:ir,GirderUpsertFolder:_r},mixins:[B,G],props:{value:{required:!0,type:Array},infoKeys:{type:Array,default:function(){return kr}},actionKeys:{type:Array,default:function(){return Cr}}},data:function(){return{showUpsert:!1}},inject:["girderRest"],asyncComputed:{details:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.datum||!e.datum.created){t.next=2;break}return t.abrupt("return",e.datum);case 2:if(!(e.datum&&e.datum._id&&e.datum._modelType)){t.next=8;break}return t.next=5,e.girderRest.get("".concat(e.datum._modelType,"/").concat(e.datum._id));case 5:return r=t.sent,n=r.data,t.abrupt("return",n);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t)})))()},files:{default:[],get:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.datum||"item"!==e.datum._modelType){t.next=6;break}return t.next=3,e.girderRest.get("item/".concat(e.datum._id,"/files"));case 3:return r=t.sent,n=r.data,t.abrupt("return",n.map((function(e){return e.name})));case 6:return t.abrupt("return",[]);case 7:case"end":return t.stop()}}),t)})))()}}},computed:{title:function(){return this.details?this.details.name||this.formatUsername(this.details):"".concat(this.value.length," Selection(s)")},datum:function(){return 1===this.value.length?this.value[0]:void 0},icon:function(){return this.datum?this.$vuetify.icons.values[this.datum._modelType]:this.$vuetify.icons.values.fileMultiple},meta:function(){return this.details&&"meta"in this.details?Object.entries(this.details.meta).map((function(e){var t=Object(i["a"])(e,2),r=t[0],n=t[1];return{key:r,value:n}})):[]},info:function(){var e=this;if(this.details)return this.infoKeys.map((function(t){var r=e.details[t.value];return t.transform&&(r=t.transform(r)),"".concat(t.name).concat(r)}));if(this.value.length>1){var t=function(e,t){return e[t._modelType]+=1,e.size+=t.size,e},r=this.value.reduce(t,{item:0,folder:0,size:0}),n=["item","folder"].filter((function(e){return r[e]>0})).map((function(e){return"".concat(r[e]," ").concat(e,"(s) selected")})),a="Total size: ".concat(this.formatSize(r.size));return[].concat(Object(P["a"])(n),[a])}return[]},actions:function(){var e=this;if(0===this.value.length)return[];var t=this.datum?this.datum._modelType:"multi";return this.actionKeys.filter((function(e){return e.for.includes(t)})).map((function(t){return t.generateHref&&(t.href=t.generateHref(e.girderRest.apiRoot,e.value)),t}))}},methods:{handleAction:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.handler){r.next=3;break}return r.next=3,e.handler.apply(t);case 3:t.$emit("action",e);case 4:case"end":return r.stop()}}),r)})))()}}},jr=Rr,Or=r("169a"),Tr=r("34c3"),Sr=Object(ie["a"])(jr,qt,Gt,!1,null,null,null),Vr=Sr.exports;oe()(Sr,{VBtn:_e["a"],VCard:xe["a"],VCol:Re["a"],VDialog:Or["a"],VIcon:ue["a"],VListItemContent:Ve["a"],VListItemIcon:Tr["a"],VRow:Le["a"],VSpacer:ze["a"],VToolbar:fr["a"],VToolbarTitle:hr["b"]});var $r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"job-filter",attrs:{dark:"dark",color:"primary"}},[r("v-card-title",[r("v-container",[r("h4",[e._v("Jobs")]),r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{sm:"5",md:"4"}},[r("v-select",{attrs:{items:e.jobTypeList,value:e.jobType,"menu-props":{"content-class":"girder-job-filter-form-menu"},label:"Job Type",clearable:"clearable",color:"white",dense:"dense"},on:{input:function(t){return e.$emit("update:jobType",t||null)}}})],1),r("v-col",{attrs:{sm:"5",md:"4"}},[r("v-select",{attrs:{items:e.statusItemList,value:e.status,"menu-props":{"content-class":"girder-job-filter-form-menu"},label:"Status",clearable:"clearable",color:"white",dense:"dense"},on:{input:function(t){return e.$emit("update:status",t||null)}}})],1)],1)],1)],1)],1)},Pr=[],Dr={props:{jobType:{type:[String,Object],default:null},jobTypeList:{type:Array,default:function(){return[]}},status:{type:[Number,Object],default:null},statusList:{type:Array,default:function(){return[]}}},data:function(){return{fromDateMenu:!1,toDateMenu:!1}},computed:{statusItemList:function(){return this.statusList.map(I).filter((function(e){return e&&e.text})).sort((function(e,t){return e.text>t.text?1:e.text<t.text?-1:0}))}}},Lr=Dr,Fr=Object(ie["a"])(Lr,$r,Pr,!1,null,null,null),Ir=Fr.exports;oe()(Fr,{VCard:xe["a"],VCardTitle:ke["c"],VCol:Re["a"],VContainer:tt["a"],VRow:Le["a"],VSelect:Ae["a"]});var Er=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"girder-job-list",attrs:{color:"primary"}},[r("filter-form",{attrs:{"from-date":e.jobFilter.fromDate,"to-date":e.jobFilter.toDate,status:e.jobFilter.status,"job-type":e.jobFilter.jobType,"status-list":e.typeAndStatusList.statuses,"job-type-list":e.typeAndStatusList.types},on:{"update:fromDate":function(t){return e.$set(e.jobFilter,"fromDate",t)},"update:from-date":function(t){return e.$set(e.jobFilter,"fromDate",t)},"update:toDate":function(t){return e.$set(e.jobFilter,"toDate",t)},"update:to-date":function(t){return e.$set(e.jobFilter,"toDate",t)},"update:status":function(t){return e.$set(e.jobFilter,"status",t)},"update:jobType":function(t){return e.$set(e.jobFilter,"jobType",t)},"update:job-type":function(t){return e.$set(e.jobFilter,"jobType",t)}}}),r("job-table",{attrs:{jobs:e.jobs,options:e.options,"more-pages":e.morePages},on:{"update:options":function(t){e.options=t},"job-click":function(t,r){return e.$emit("job-click",t,r)}},scopedSlots:e._u([e.$scopedSlots.jobwidget?{key:"jobwidget",fn:function(t){return[e._t("jobwidget",null,null,t)]}}:null],null,!0)})],1)},Ur=[],Mr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-data-table",{attrs:{headers:e.headers_,items:e.items,"server-items-length":e.serverItemsLength,options:e.options,"item-key":"_id"},on:{"update:options":function(t){return e.$emit("update:options",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[r("tr",{on:{click:function(r){return e.$emit("job-click",r,t.item)}}},[r("td",{staticClass:"one-line"},[e._v(" "+e._s(t.item.title)+" ")]),r("td",{staticClass:"one-line"},[e._v(" "+e._s(t.item.type)+" ")]),r("td",{staticClass:"one-line"},[e._v(" "+e._s(t.item.updateString)+" ")]),r("td",{staticClass:"one-line",attrs:{title:t.item.statusText,nowrap:"nowrap"}},[r("job-progress",{attrs:{"formatted-job":t.item}})],1),r("td",{staticClass:"one-line pa-0"},[e._t("jobwidget",null,null,t)],2)])]}},{key:"footer.page-text",fn:function(){return[r("div",{staticClass:"v-datatable__actions__options"},[e._v(" "+e._s(e.pageRange.first)+"-"+e._s(e.pageRange.last)+" ")])]},proxy:!0}],null,!0)})},Ar=[],zr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex progress-bar align-center"},[r("v-progress-linear",{staticClass:"mr-3",attrs:{color:e.formattedJob.statusColor,value:e.formattedJob.progressNumber,indeterminate:!!e.formattedJob.indeterminate,height:"10"}}),r("v-icon",{staticClass:"status-icon",class:e.formattedJob.class,attrs:{color:e.formattedJob.statusColor,size:20}},[e._v(" "+e._s(e.formattedJob.statusIcon)+" ")])],1)},Nr=[],Br={props:{formattedJob:{type:Object,required:!0}}},qr=Br,Gr=(r("d325"),r("8e36")),Jr=Object(ie["a"])(qr,zr,Nr,!1,null,"b1ad37e6",null),Hr=Jr.exports;oe()(Jr,{VIcon:ue["a"],VProgressLinear:Gr["a"]});var Kr={components:{JobProgress:Hr},mixins:[J],props:{jobs:{type:Array,required:!0},options:{type:Object,required:!0},morePages:{type:Boolean,default:!0}},data:function(){return{headers:[{text:"Job Title",value:"title"},{text:"Type",value:"type"},{text:"Last Updated",value:"updated"},{text:"Status",value:"status"}]}},computed:{items:function(){return this.jobs.map(this.formatJob)},headers_:function(){var e={sortable:!1,align:"end"};return this.headers.concat(this.$scopedSlots.jobwidget?e:[])},serverItemsLength:function(){var e=this.pageRange.last;return this.morePages&&(e+=1),e},pageRange:function(){var e=this.options.itemsPerPage*(this.options.page-1)+1,t=e+this.jobs.length-1;return{first:e,last:t}}}},Wr=Kr,Qr=(r("2cf7"),Object(ie["a"])(Wr,Mr,Ar,!1,null,"199ce286",null)),Yr=Qr.exports;oe()(Qr,{VDataTable:Ft["a"]});var Xr={inject:["girderRest","notificationBus"],components:{JobTable:Yr,FilterForm:Ir},data:function(){return{jobFilter:{fromDate:null,toDate:null,status:null,jobType:null},options:{itemsPerPage:10,page:1,sortBy:["updated"],descending:!0},morePages:!0,refresh:0}},watch:{jobFilter:{handler:function(){this.options.page=1},deep:!0}},asyncComputed:{jobs:{get:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.girderRest.user,e.refresh,r=e.options,n={limit:r.itemsPerPage+1,offset:r.itemsPerPage*(r.page-1)},r.sortBy&&(n.sort=r.sortBy,n.sortdir=r.descending?-1:1),null!==e.jobFilter.status&&(n.statuses=JSON.stringify([e.jobFilter.status])),null!==e.jobFilter.jobType&&(n.types=JSON.stringify([e.jobFilter.jobType])),t.next=9,e.girderRest.get("job?".concat(Object(b["stringify"])(n)));case 9:return a=t.sent,a.data.length<n.limit?e.morePages=!1:e.morePages=!0,t.abrupt("return",a.data.slice(0,r.itemsPerPage));case 12:case"end":return t.stop()}}),t)})))()},default:function(){return[]}},typeAndStatusList:{get:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.girderRest.user,t.next=3,e.girderRest.get("job/typeandstatus");case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})))()},default:function(){return{statuses:[],types:[]}}}},mounted:function(){var e=this;this.refreshJobFunc=function(){e.refreshJobList()},this.notificationBus.$on("message:job_status",this.refreshJobFunc),this.notificationBus.$on("message:job_created",this.refreshJobFunc)},beforeDestroy:function(){this.notificationBus.$off("message:job_status",this.refreshJobFunc),this.notificationBus.$off("message:job_created",this.refreshJobFunc)},methods:{refreshJobList:function(){this.refresh+=1}}},Zr=Xr,en=Object(ie["a"])(Zr,Er,Ur,!1,null,null,null),tn=en.exports;oe()(en,{VCard:xe["a"]});var rn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"fill-height",attrs:{flat:"flat"}},[r("v-row",{staticClass:"flex-column fill-height",attrs:{"no-gutters":"no-gutters"}},[e._t("header",[r("v-card-title",{attrs:{"primary-title":"primary-title"}},[r("div",[e.hideHeadline?e._e():r("div",{staticClass:"headline"},[e._v(" Upload to "),r("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.dest.name))])]),r("div",{staticClass:"grey--text title"},[e._v(" "+e._s(e.statusMessage)+" ")])])])]),e.uploading?r("v-progress-linear",{attrs:{value:e.totalProgressPercent,indeterminate:e.indeterminate,height:"20"}}):e._e(),r("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:e.files.length&&!e.errorMessage&&!e.uploading,expression:"files.length && !errorMessage && !uploading"}]},[r("v-btn",{attrs:{text:"text"},on:{click:e.reset}},[e._v(" Clear all ")]),e.hideStartButton?e._e():r("v-btn",{attrs:{color:"primary"},on:{click:e.startUpload}},[e._v(" "+e._s(e.startButtonText)+" ")])],1),r("v-col",[e._t("dropzone",[e.files.length?e._e():r("dropzone",{attrs:{message:e.dropzoneMessage,multiple:e.multiple,accept:e.accept},on:{change:e.inputFilesChanged}})],null,{files:e.files,dropzoneMessage:e.dropzoneMessage,multiple:e.multiple,accept:e.accept,inputFilesChanged:e.inputFilesChanged})],2),e.errorMessage?r("div",[r("v-alert",{attrs:{value:!0,dark:"dark",tile:"tile",type:"error"}},[e._v(" "+e._s(e.errorMessage)+" "),e.uploading?e._e():r("v-btn",{staticClass:"ml-3",attrs:{dark:"dark",small:"small",outlined:"outlined"},on:{click:e.startUpload}},[e._v(" Resume upload ")]),e.uploading?e._e():r("v-btn",{staticClass:"ml-3",attrs:{dark:"dark",small:"small",outlined:"outlined"},on:{click:e.reset}},[e._v(" Abort ")])],1)],1):e._e(),e._t("files",[r("file-upload-list",e._b({on:{input:e.setFiles}},"file-upload-list",{value:e.files,maxShow:e.maxShow},!1))],null,{files:e.files,setFiles:e.setFiles,maxShow:e.maxShow})],2)],1)},nn=[],an=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dropzone-wrapper",class:e.dropzoneClass,on:{dragenter:function(t){e.dropzoneClass="animate"},dragleave:function(t){e.dropzoneClass=null},drop:function(t){e.dropzoneClass=null}}},[r("v-row",{staticClass:"flex-column align-center justify-center fill-height dropzone-message"},[r("v-icon",{attrs:{size:"50px"}},[e._v(" $vuetify.icons.fileUpload ")]),r("div",{staticClass:"title mt-3"},[e._v(" "+e._s(e.message)+" ")])],1),r("input",{staticClass:"file-input",attrs:{multiple:e.multiple,accept:e.accept,type:"file"},on:{change:function(t){e.$emit("change",Array.apply(void 0,t.target.files))}}})],1)},sn=[],on={props:{message:{type:String,required:!0},multiple:{type:Boolean,required:!0},accept:{type:String,default:null}},data:function(){return{dropzoneClass:null}}},ln=on,cn=(r("c2a0"),Object(ie["a"])(ln,an,sn,!1,null,"4c2a7722",null)),un=cn.exports;oe()(cn,{VIcon:ue["a"],VRow:Le["a"]});var dn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-list",{directives:[{name:"show",rawName:"v-show",value:e.value.length,expression:"value.length"}],attrs:{dense:"dense"}},[e._l(e.shownFiles,(function(t,n){return r("div",{key:t.file.name,staticClass:"file-tile",class:"status-"+t.status},[n>0?r("v-divider"):e._e(),r("v-list-item",[r("v-list-item-icon",["pending"===t.status?r("v-btn",{attrs:{icon:"icon"},on:{click:function(t){e.$emit("input",e.splice(n))}}},[r("v-icon",[e._v("$vuetify.icons.close")])],1):e._e(),"uploading"===t.status?r("v-progress-circular",{attrs:{rotate:-90,value:e.progressPercent(Object.assign({},t.progress,{total:t.progress.size})),indeterminate:t.progress.indeterminate,color:"primary"}}):e._e(),"done"===t.status?r("v-icon",{attrs:{color:"success",large:"large"}},[e._v(" $vuetify.icons.complete ")]):e._e(),"error"===t.status?r("v-icon",{attrs:{color:"error",large:"large"}},[e._v(" $vuetify.icons.error ")]):e._e()],1),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(t.file.name))]),r("v-list-item-subtitle",[t.progress.current?r("span",[e._v(e._s(e.formatSize(t.progress.current))+" /")]):e._e(),r("span",[e._v(e._s(e.formatSize(t.file.size)))])])],1),e._t("item",null,null,{file:t})],2)],1)})),e.hiddenCount?[r("v-divider"),r("v-list-item",[r("v-list-item-content",[r("div",{staticClass:"grey--text subtitle-1"},[e._v(" + "+e._s(e.hiddenCount)+" more... ")])])],1)]:e._e()],2)},pn=[],fn={mixins:[q,B],props:{value:{type:Array,required:!0},maxShow:{type:Number,default:0}},computed:{notDone:function(){return this.value.filter((function(e){return"done"!==e.status}))},shownFiles:function(){return this.maxShow?this.notDone.slice(0,this.maxShow):this.value},hiddenCount:function(){return this.maxShow?this.notDone.length-this.shownFiles.length:0}},methods:{splice:function(e){return[].concat(Object(P["a"])(this.value.slice(0,e)),Object(P["a"])(this.value.slice(e+1)))}}},hn=fn,mn=(r("480f"),r("490a")),vn=Object(ie["a"])(hn,dn,pn,!1,null,"ddee59da",null),gn=vn.exports;oe()(vn,{VBtn:_e["a"],VDivider:je["a"],VIcon:ue["a"],VList:Oe["a"],VListItem:Te["a"],VListItemContent:Ve["a"],VListItemIcon:Tr["a"],VListItemSubtitle:Ve["b"],VListItemTitle:Ve["c"],VProgressCircular:mn["a"]});var bn={components:{Dropzone:un,FileUploadList:gn},mixins:[H,q,B],inject:["girderRest"],props:{dest:{required:!0,type:Object},maxShow:{default:0,type:Number},multiple:{default:!0,type:Boolean},preUpload:{default:function(){},type:Function},postUpload:{default:function(){},type:Function},uploadCls:{default:z,type:Function},accept:{default:null,type:String},startButtonText:{default:"Start Upload",type:String},hideStartButton:{default:!1,type:Boolean},hideHeadline:{default:!1,type:Boolean}},data:function(){return{dragover:!1}},computed:{dropzoneMessage:function(){return this.multiple?"Drag files here or click to select them":"Drag a file here or click to select one"},statusMessage:function(){return this.uploading?"".concat(this.formatSize(this.totalProgress)," / ").concat(this.formatSize(this.totalSize)," ")+"(".concat(this.totalProgressPercent,"%)"):"".concat(this.files.length," selected (").concat(this.formatSize(this.totalSize)," total)")}},methods:{startUpload:function(){var e=this.dest,t=this.uploadCls,r=this.preUpload,n=this.postUpload;this.start({dest:e,uploadCls:t,preUpload:r,postUpload:n}).catch((function(){}))}}},yn=bn,wn=Object(ie["a"])(yn,rn,nn,!1,null,null,null),_n=wn.exports;function xn(e){e.use(S["a"]),e.use(T["a"])}oe()(wn,{VAlert:ct["a"],VBtn:_e["a"],VCard:xe["a"],VCardActions:ke["a"],VCardTitle:ke["c"],VCol:Re["a"],VProgressLinear:Gr["a"],VRow:Le["a"]});var kn=new S["a"](Object(f["a"])({},W)),Cn={install:xn},Rn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{staticClass:"app"},[r("v-navigation-drawer",{attrs:{app:"app"}},[r("v-list",[r("nav-link",{staticClass:"mb-1 font-weight-bold",attrs:{title:"Components"}}),r("nav-link",{attrs:{title:"Authentication",href:"#auth"}}),r("nav-link",{attrs:{title:"Upload",href:"#upload"}}),r("nav-link",{attrs:{title:"Search",href:"#search"}}),r("nav-link",{attrs:{title:"File manager",href:"#file-manager"}}),r("nav-link",{attrs:{title:"Data details",href:"#data-details"}}),r("nav-link",{attrs:{title:"Job list",href:"#job-list"}}),r("nav-link",{attrs:{title:"Access control",href:"#access-control"}}),r("nav-link",{attrs:{title:"Add / edit folder",href:"#upsert-folder"}}),r("nav-link",{attrs:{title:"Breadcrumb",href:"#breadcrumb"}})],1)],1),r("v-main",[r("v-container",[r("v-col",{attrs:{xl:"8","offset-xl":"2",lg:"10","offset-lg":"1",md:"12","offset-md":"0"}},[r("div",{staticClass:"display-3"},[e._v(" Girder Web Components ")]),r("div",{staticClass:"title mb-1"},[e._v(" A Vue + Vuetify library for interacting with "),r("a",{attrs:{href:"https://www.kitware.com/"}},[e._v("Kitware's")]),e._v(" data management platform, "),r("a",{attrs:{href:"https://girder.readthedocs.io/en/stable/"}},[e._v("Girder")])]),e._l(e.badges,(function(e){return r("img",{key:e,staticClass:"pr-3",attrs:{src:e}})})),r("v-row",{staticClass:"ma-0"},[r("div",{staticClass:"title mb-1"},[e._v(" This demo integrates with "),r("a",{attrs:{href:"https://data.kitware.com"}},[e._v("data.kitware.com")])]),r("v-switch",{staticClass:"mx-4 my-0",attrs:{"hide-details":"hide-details",label:"Dark theme"},model:{value:e.$vuetify.theme.dark,callback:function(t){e.$set(e.$vuetify.theme,"dark",t)},expression:"$vuetify.theme.dark"}})],1),r("a",{attrs:{id:"auth"}}),r("headline",{attrs:{title:"girder-auth",link:"src/components/Authentication/Authentication.vue",description:"allows users to authenticate with girder"}}),r("v-row",{staticClass:"mb-2"},[r("v-switch",{staticClass:"ma-2",attrs:{"hide-details":"hide-details",label:"register"},model:{value:e.authRegister,callback:function(t){e.authRegister=t},expression:"authRegister"}}),r("v-switch",{staticClass:"ma-2",attrs:{"hide-details":"hide-details",label:"oauth"},model:{value:e.authOauth,callback:function(t){e.authOauth=t},expression:"authOauth"}})],1),e.loggedOut?[r("girder-auth",{key:e.girderRest.token,attrs:{"force-otp":!1,register:e.authRegister,oauth:e.authOauth,"forgot-password-url":e.forgotPasswordUrl}})]:[e.loggedOut?e._e():r("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.girderRest.logout()}}},[e._v(" Log Out "),r("v-icon",{staticClass:"pl-2"},[e._v(" $vuetify.icons.logout ")])],1)],r("a",{attrs:{id:"upload"}}),r("headline",{attrs:{title:"girder-upload",link:"src/components/Upload.vue",description:"upload files to a specified location in girder"}}),r("v-card",[r("girder-upload",{attrs:{dest:e.uploadDest,"post-upload":e.postUpload}})],1),r("a",{attrs:{id:"search"}}),r("headline",{attrs:{title:"girder-search",link:"src/components/Search.vue",description:"provides global search functionality"}}),r("v-toolbar",{attrs:{color:"primary"}},[r("girder-search",{on:{select:e.handleSearchSelect}})],1),r("v-row",[r("v-col",{staticClass:"pr-4",attrs:{xl:"8",lg:"8",md:"6",sm:"12"}},[r("a",{attrs:{id:"file-manager"}}),r("headline",{attrs:{title:"girder-file-manager",link:"src/components/Snippet/FileManager.vue",description:"a wrapper around girder-data-browser. It packages the browser with\n              defaults including folder creation, item upload, and a breadcrumb bar"}})],1),r("v-col",{staticClass:"pa-0"},[r("a",{attrs:{id:"data-details"}}),r("headline",{attrs:{title:"girder-data-details",link:"src/components/DataDetails.vue",description:"in-depth information and controls for a single folder or item, or\n              batch operations for groups of objects."}})],1)],1),r("v-row",[r("v-switch",{staticClass:"ma-2",attrs:{"hide-details":"hide-details",label:"Select"},model:{value:e.selectable,callback:function(t){e.selectable=t},expression:"selectable"}}),r("v-switch",{staticClass:"ma-2",attrs:{"hide-details":"hide-details",label:"Draggable"},model:{value:e.dragEnabled,callback:function(t){e.dragEnabled=t},expression:"dragEnabled"}}),r("v-switch",{staticClass:"ma-2",attrs:{"hide-details":"hide-details",label:"New Folder"},model:{value:e.newFolderEnabled,callback:function(t){e.newFolderEnabled=t},expression:"newFolderEnabled"}}),r("v-switch",{staticClass:"ma-2",attrs:{"hide-details":"hide-details",label:"Upload"},model:{value:e.uploadEnabled,callback:function(t){e.uploadEnabled=t},expression:"uploadEnabled"}}),r("v-switch",{staticClass:"mt-2",attrs:{"hide-details":"hide-details",label:"Root Disabled"},model:{value:e.rootLocationDisabled,callback:function(t){e.rootLocationDisabled=t},expression:"rootLocationDisabled"}})],1),r("v-row",[r("v-col",{staticClass:"pr-4",attrs:{lg:"8",md:"6",sm:"12"}},[r("girder-file-manager",{ref:"girderFileManager",attrs:{"items-per-page-options":[10,20,-1],"drag-enabled":e.dragEnabled,"new-folder-enabled":e.newFolderEnabled,selectable:e.selectable,location:e.location,"root-location-disabled":e.rootLocationDisabled,"upload-multiple":e.uploadMultiple,"upload-enabled":e.uploadEnabled},on:{"update:location":function(t){e.location=t},dragend:e.dragend},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e.dragEnabled?r("v-card",{staticClass:"mt-4",on:{dragenter:function(e){e.preventDefault()},dragover:function(e){e.preventDefault()},drop:e.drop}},[r("v-card-title",[e._v("Drop Zone")]),r("v-card-text",[e.dropped.length?e._l(e.dropped,(function(t){var n=t.item;return r("ul",{key:n._id,staticClass:"header"},[r("li",[e._v("type: "+e._s(n._modelType))]),r("li",[e._v("name: "+e._s(n.name)+" ")]),r("li",[e._v("size: "+e._s(n.size))])])})):r("p",[e._v(" Drag a row here to see results ")])],2)],1):e._e()],1),r("v-col",{staticClass:"pl-0",attrs:{lg:"4",md:"6",sm:"12"}},[r("girder-data-details",{attrs:{value:e.detailsList},on:{action:e.handleAction}})],1)],1),r("a",{attrs:{id:"job-list"}}),r("headline",{attrs:{title:"girder-job-list",link:"src/components/Job/JobList.vue",description:"display and filter girder jobs"}}),r("girder-job-list"),r("a",{attrs:{id:"access-control"}}),r("headline",{attrs:{title:"girder-access-control",link:"src/components/AccessControl.vue",description:"access controls for folders and items"}}),r("girder-access-control",{attrs:{model:e.uploadDest}}),r("a",{attrs:{id:"upsert-folder"}}),r("headline",{attrs:{title:"girder-upsert-folder",link:"src/components/UpsertFolder.vue",description:"create and edit folders"}}),r("v-switch",{attrs:{label:"Edit Mode"},model:{value:e.upsertEdit,callback:function(t){e.upsertEdit=t},expression:"upsertEdit"}}),r("v-card",[r("girder-upsert-folder",{attrs:{location:e.uploadDest,edit:e.upsertEdit}})],1),r("a",{attrs:{id:"breadcrumb"}}),r("headline",{attrs:{title:"girder-breadcrumb",link:"src/components/Breadcrumb.vue",description:"filesystem path breadcrumb"}}),r("v-card",{staticClass:"pa-4"},[r("girder-breadcrumb",{attrs:{location:e.uploadDest}})],1)],2)],1)],1)],1)},jn=[],On=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"girder-data-browser-snippet"},[r("girder-data-browser",{ref:"girderBrowser",attrs:{location:e.internalLocation,selectable:e.selectable,draggable:e.dragEnabled,"root-location-disabled":e.rootLocationDisabled,value:e.value,"initial-items-per-page":e.initialItemsPerPage,"items-per-page-options":e.itemsPerPageOptions},on:{"update:location":function(t){e.internalLocation=t},input:function(t){return e.$emit("input",t)},"selection-changed":function(t){return e.$emit("selection-changed",t)},rowclick:function(t){return e.$emit("rowclick",t)},"row-right-click":e.rowRightClick,drag:function(t){return e.$emit("drag",t)},dragstart:function(t){return e.$emit("dragstart",t)},dragend:function(t){return e.$emit("dragend",t)},drop:function(t){return e.$emit("drop",t)}},scopedSlots:e._u([{key:"breadcrumb",fn:function(e){return[r("girder-breadcrumb",{attrs:{location:e.location,"root-location-disabled":e.rootLocationDisabled},on:{crumbclick:function(t){return e.changeLocation(t)}}})]}},{key:"headerwidget",fn:function(){return[e._t("headerwidget"),e.shouldShowUpload?r("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({staticClass:"ma-0",attrs:{text:"text",small:"small"}},n),[r("v-icon",{staticClass:"mdi-24px mr-1",attrs:{left:"left",color:"accent"}},[e._v(" $vuetify.icons.fileNew ")]),r("span",{staticClass:"hidden-xs-only"},[e._v("Upload")])],1)]}}],null,!1,3801941586),model:{value:e.uploaderDialog,callback:function(t){e.uploaderDialog=t},expression:"uploaderDialog"}},[r("girder-upload",{attrs:{dest:e.uploadDest,"pre-upload":e.preUpload,"post-upload":e.postUploadInternal,multiple:e.uploadMultiple,"max-show":e.uploadMaxShow,accept:e.uploadAccept}})],1):e._e(),e.newFolderEnabled&&!e.isRootLocation(e.internalLocation)&&e.girderRest.user?r("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({staticClass:"ma-0",attrs:{text:"text",small:"small"}},n),[r("v-icon",{staticClass:"mdi-24px mr-1",attrs:{left:"left",color:"accent"}},[e._v(" $vuetify.icons.folderNew ")]),r("span",{staticClass:"hidden-xs-only"},[e._v("New Folder")])],1)]}}],null,!1,997089899),model:{value:e.newFolderDialog,callback:function(t){e.newFolderDialog=t},expression:"newFolderDialog"}},[r("girder-upsert-folder",{key:e.internalLocation._id,attrs:{location:e.internalLocation,"pre-upsert":e.preUpsert,"post-upsert":e.postUpsertInternal},on:{dismiss:function(t){e.newFolderDialog=!1}}})],1):e._e()]},proxy:!0},{key:"row-widget",fn:function(t){return[e._t("row-widget",null,null,t)]}}],null,!0)}),r("v-menu",{attrs:{"position-x":e.collectionAndFolderMenu.x,"position-y":e.collectionAndFolderMenu.y,absolute:"absolute","offset-y":"offset-y",dark:"dark"},model:{value:e.collectionAndFolderMenu.show,callback:function(t){e.$set(e.collectionAndFolderMenu,"show",t)},expression:"collectionAndFolderMenu.show"}},[r("v-list",{attrs:{dense:"dense"}},[r("v-list-item",{attrs:{disabled:!e.hasAccessPermission},on:{click:function(t){e.showAccessControlDialog=!0}}},[r("v-list-item-title",[e._v("Access control")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"700px",persistent:"persistent",eager:"eager",scrollable:"scrollable"},model:{value:e.showAccessControlDialog,callback:function(t){e.showAccessControlDialog=t},expression:"showAccessControlDialog"}},[e.actOnItem?r("girder-access-control",{attrs:{model:e.actOnItem,"has-permission":e.hasAccessPermission},on:{"update:hasPermission":function(t){e.hasAccessPermission=t},"update:has-permission":function(t){e.hasAccessPermission=t},close:function(t){e.showAccessControlDialog=!1},"model-access-changed":function(t){return e.$refs.girderBrowser.refresh()}}}):e._e()],1)],1)},Tn=[],Sn={components:{GirderAccessControl:Ge,GirderBreadcrumb:pe,GirderUpload:_n,GirderUpsertFolder:_r,GirderDataBrowser:Bt},props:{value:{type:Array,default:function(){return[]}},location:{type:Object,validator:ee(!0),default:null},rootLocationDisabled:{type:Boolean,default:!1},noAccessControl:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},dragEnabled:{type:Boolean,default:!1},uploadEnabled:{type:Boolean,default:!1},newFolderEnabled:{type:Boolean,default:!1},uploadMaxShow:{type:Number,default:0},uploadMultiple:{type:Boolean,default:!1},uploadAccept:{type:String,default:"*"},preUpload:{type:Function,default:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},postUpload:{type:Function,default:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},preUpsert:{type:Function,default:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},postUpsert:{type:Function,default:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},initialItemsPerPage:{type:Number,default:10},itemsPerPageOptions:{type:Array,default:function(){return[10,25,50]}}},inject:["girderRest"],data:function(){return{uploaderDialog:!1,newFolderDialog:!1,lazyLocation:null,collectionAndFolderMenu:{show:!1,x:0,y:0},actOnItem:null,showAccessControlDialog:!1,hasAccessPermission:!1}},computed:{internalLocation:{get:function(){var e=this.location,t=this.lazyLocation;return e||(t||{type:"root"})},set:function(e){this.lazyLocation=e,this.$emit("update:location",e)}},uploadDest:function(){var e=this.internalLocation;return e&&"folder"===Y(e)?e:null},shouldShowUpload:function(){return this.uploadEnabled&&!X(this.internalLocation)&&this.girderRest.user&&this.uploadDest}},created:function(){if(!ee(!this.rootLocationDisabled)(this.internalLocation))throw new Error("root location cannot be used when root-location-disabled is true")},methods:{isRootLocation:X,refresh:function(){this.$refs.girderBrowser.refresh()},postUploadInternal:function(){return this.$refs.girderBrowser.refresh(),this.uploaderDialog=!1,Promise.all([new Promise((function(e){return setTimeout(e,400)})),this.postUpload()])},postUpsertInternal:function(){return this.$refs.girderBrowser.refresh(),this.newFolderDialog=!1,Promise.all([new Promise((function(e){return setTimeout(e,400)})),this.postUpsert()])},rowRightClick:function(e,t){var r=this;this.noAccessControl||-1!==["collection","folder"].indexOf(e._modelType)&&(t.preventDefault(),this.collectionAndFolderMenu.show=!1,this.collectionAndFolderMenu.x=t.clientX,this.collectionAndFolderMenu.y=t.clientY,this.actOnItem=e,this.$nextTick((function(){r.collectionAndFolderMenu.show=!0})))}}},Vn=Sn,$n=Object(ie["a"])(Vn,On,Tn,!1,null,null,null),Pn=$n.exports;oe()($n,{VBtn:_e["a"],VCard:xe["a"],VDialog:Or["a"],VIcon:ue["a"],VList:Oe["a"],VListItem:Te["a"],VListItemTitle:Ve["c"],VMenu:$e["a"]});var Dn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"headline font-weight-bold mono mt-8"},[e._v(" "+e._s(e.title)+" "),r("v-btn",{staticClass:"ml-2",attrs:{href:e.repoBase+e.link,icon:"icon",title:"View source"}},[r("v-icon",[e._v("$vuetify.icons.externalLink")])],1)],1),r("div",{staticClass:"subtitle-1 mb-4"},[e._v(" "+e._s(e.description)+" ")])])},Ln=[],Fn="https://github.com/girder/girder_web_components/blob/master/",In={props:{title:{type:String,required:!0},description:{type:String,required:!0},link:{type:String,required:!0}},data:function(){return{repoBase:Fn}}},En=In,Un=(r("cf5a"),Object(ie["a"])(En,Dn,Ln,!1,null,"4ab089ac",null)),Mn=Un.exports;oe()(Un,{VBtn:_e["a"],VIcon:ue["a"]});var An=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-list-item",e._g({attrs:{link:!!e.href,href:e.href}},e.listeners),[r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.title))])],1)],1)},zn=[],Nn={props:{title:{type:String,required:!0},href:{type:String,default:null}},computed:{listeners:function(){var e=this;return this.href?{click:function(){e.$vuetify.goTo(e.href)}}:{}}}},Bn=Nn,qn=Object(ie["a"])(Bn,An,zn,!1,null,null,null),Gn=qn.exports;oe()(qn,{VListItem:Te["a"],VListItemContent:Ve["a"],VListItemTitle:Ve["c"]});var Jn={name:"App",inject:["girderRest"],components:{Headline:Mn,NavLink:Gn,GirderAccessControl:Ge,GirderAuth:Tt,GirderBreadcrumb:pe,GirderDataDetails:Vr,GirderFileManager:Pn,GirderJobList:tn,GirderSearch:Ee,GirderUpload:_n,GirderUpsertFolder:_r},data:function(){return{authOauth:!0,authRegister:!0,dragEnabled:!1,forgotPasswordUrl:"/#?dialog=resetpassword",internalLocation:null,rootLocationDisabled:!1,selected:[],selectable:!0,uploadEnabled:!0,uploadMultiple:!0,upsertEdit:!1,newFolderEnabled:!0,badges:["https://img.shields.io/circleci/build/github/girder/girder_web_components/master?style=for-the-badge","https://img.shields.io/npm/v/@girder/components?style=for-the-badge","https://img.shields.io/npm/dm/@girder/components?style=for-the-badge","https://img.shields.io/bundlephobia/min/@girder/components?style=for-the-badge","https://img.shields.io/github/stars/girder/girder_web_components?style=for-the-badge"],dropped:[],droppedStrings:[]}},computed:{loggedOut:function(){return null===this.girderRest.user},location:{get:function(){return this.internalLocation||(this.loggedOut?{_id:"5c8a72438d777f072b97f9e1",_modelType:"folder"}:this.girderRest.user)},set:function(e){this.internalLocation=e}},uploadDest:function(){return"folder"===this.location._modelType?this.location:{name:"temp",_id:"5e2a25fdaf2e2eed35309112",_modelType:"folder"}},detailsList:function(){return this.selected.length?this.selected:this.location&&this.location._id?[this.location]:[]}},methods:{handleSearchSelect:function(e){["user","folder"].indexOf(e._modelType)>=0?this.location=e:this.location={_modelType:"folder",_id:e.folderId}},handleAction:function(e){"Delete"===e.name&&(this.$refs.girderFileManager.refresh(),this.selected=[])},postUpload:function(){this.$refs.girderFileManager.refresh()},dragend:function(e){var t=e.items;this.dropped=t},drop:function(e){this.droppedStrings=e.dataTransfer.getData("application/x-girder-items")}}},Hn=Jn,Kn=(r("63fc"),r("7496")),Wn=r("f6c4"),Qn=r("f774"),Yn=Object(ie["a"])(Hn,Rn,jn,!1,null,"7bf3cf71",null),Xn=Yn.exports;oe()(Yn,{VApp:Kn["a"],VBtn:_e["a"],VCard:xe["a"],VCardText:ke["b"],VCardTitle:ke["c"],VCol:Re["a"],VContainer:tt["a"],VIcon:ue["a"],VList:Oe["a"],VMain:Wn["a"],VNavigationDrawer:Qn["a"],VRow:Le["a"],VSwitch:Be["a"],VToolbar:fr["a"]}),n["a"].use(Cn);var Zn=new O({apiRoot:"https://data.kitware.com/api/v1"}),ea=new d(Zn,{useEventSource:!0});Zn.fetchUser().then((function(e){e&&ea.connect(),new n["a"]({vuetify:kn,render:function(e){return e(Xn)},provide:{girderRest:Zn,notificationBus:ea}}).$mount("#app")}))},aaca:function(e,t,r){},b9b5:function(e,t,r){},c0ee:function(e,t,r){},c13a:function(e,t,r){},c2a0:function(e,t,r){"use strict";var n=r("c13a"),a=r.n(n);a.a},cda9:function(e,t,r){},cf5a:function(e,t,r){"use strict";var n=r("aaca"),a=r.n(n);a.a},d26f:function(e,t,r){},d325:function(e,t,r){"use strict";var n=r("47a8"),a=r.n(n);a.a},dfab:function(e,t,r){"use strict";var n=r("2d1c"),a=r.n(n);a.a},e589:function(e,t,r){"use strict";var n=r("cda9"),a=r.n(n);a.a},eeab:function(e,t,r){},ff01:function(e,t,r){}});
//# sourceMappingURL=app.e403a46b.js.map